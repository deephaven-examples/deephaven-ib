<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" />

    <link rel="shortcut icon" href="../../_static/favicon.svg"/><!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>deephaven.table - deephaven_ib documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=aca143e9" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">deephaven_ib  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">deephaven_ib  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modules.html">Python Modules</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Python Modules</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../code/deephaven_server.html">deephaven_server</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of deephaven_server</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven_server.cli.html">cli</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven_server.server.html">server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven_server.start_jvm.html">start_jvm</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../code/deephaven_ib.html">deephaven_ib</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of deephaven_ib</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven_ib.time.html">time</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../code/deephaven.html">deephaven</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of deephaven</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.agg.html">agg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.appmode.html">appmode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.arrow.html">arrow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.barrage.html">barrage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.calendar.html">calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.column.html">column</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.concurrency_control.html">concurrency_control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.constants.html">constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.csv.html">csv</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.dbc.html">dbc</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of dbc</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.dbc.adbc.html">adbc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.dbc.odbc.html">odbc</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.dherror.html">dherror</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.dtypes.html">dtypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.execution_context.html">execution_context</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.experimental.html">experimental</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of experimental</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.data_index.html">data_index</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.ema.html">ema</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.iceberg.html">iceberg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.outer_joins.html">outer_joins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.s3.html">s3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.sql.html">sql</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.experimental.table_data_service.html">table_data_service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.filters.html">filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.html.html">html</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.jcompat.html">jcompat</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.json.html">json</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of json</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.json.jackson.html">jackson</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.learn.html">learn</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of learn</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.learn.gather.html">gather</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.liveness_scope.html">liveness_scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.numpy.html">numpy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.pandas.html">pandas</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.pandasplugin.html">pandasplugin</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of pandasplugin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.pandasplugin.pandas_as_table.html">pandas_as_table</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.parquet.html">parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.perfmon.html">perfmon</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.plot.html">plot</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of plot</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.axisformat.html">axisformat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.axistransform.html">axistransform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.color.html">color</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.figure.html">figure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.font.html">font</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.linestyle.html">linestyle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.plotstyle.html">plotstyle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.selectable_dataset.html">selectable_dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plot.shape.html">shape</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.plugin.html">plugin</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of plugin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plugin.js.html">js</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.plugin.object_type.html">object_type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.query_library.html">query_library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.replay.html">replay</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.server.html">server</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of server</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.server.executors.html">executors</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../code/deephaven.stream.html">stream</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of stream</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../code/deephaven.stream.kafka.html">kafka</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of kafka</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../code/deephaven.stream.kafka.cdc.html">cdc</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../code/deephaven.stream.kafka.consumer.html">consumer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../code/deephaven.stream.kafka.producer.html">producer</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../code/deephaven.stream.table_publisher.html">table_publisher</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.systemic_obj_tracker.html">systemic_obj_tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.table.html">table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.table_factory.html">table_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.table_listener.html">table_listener</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.time.html">time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.update_graph.html">update_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.updateby.html">updateby</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../code/deephaven.uri.html">uri</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../code/jpy.html">jpy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../code/ibapi.contract.html">ibapi.contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../code/ibapi.order.html">ibapi.order</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for deephaven.table</h1><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1"># Copyright (c) 2016-2025 Deephaven Data Labs and Patent Pending</span>
<span class="c1">#</span>

<span class="sd">&quot;&quot;&quot;This module implements the Table, PartitionedTable and PartitionedTableProxy classes which are the main</span>
<span class="sd">instruments for working with Deephaven refreshing and static data.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">contextlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">Sequence</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">auto</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">cached_property</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">TYPE_CHECKING</span><span class="p">,</span>
    <span class="n">Any</span><span class="p">,</span>
    <span class="n">Callable</span><span class="p">,</span>
    <span class="n">Literal</span><span class="p">,</span>
    <span class="n">Optional</span><span class="p">,</span>
    <span class="n">Protocol</span><span class="p">,</span>
    <span class="n">Union</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">jpy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven</span><span class="w"> </span><span class="kn">import</span> <span class="n">DHError</span><span class="p">,</span> <span class="n">dtypes</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven._query_scope</span><span class="w"> </span><span class="kn">import</span> <span class="n">query_scope_ctx</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven._wrapper</span><span class="w"> </span><span class="kn">import</span> <span class="n">JObjectWrapper</span><span class="p">,</span> <span class="n">unwrap</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.agg</span><span class="w"> </span><span class="kn">import</span> <span class="n">Aggregation</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.column</span><span class="w"> </span><span class="kn">import</span> <span class="n">ColumnDefinition</span><span class="p">,</span> <span class="n">col_def</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.concurrency_control</span><span class="w"> </span><span class="kn">import</span> <span class="n">Barrier</span><span class="p">,</span> <span class="n">ConcurrencyControl</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.filters</span><span class="w"> </span><span class="kn">import</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">and_</span><span class="p">,</span> <span class="n">or_</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.jcompat</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">j_array_list</span><span class="p">,</span>
    <span class="n">j_binary_operator</span><span class="p">,</span>
    <span class="n">j_hashmap</span><span class="p">,</span>
    <span class="n">j_map_to_dict</span><span class="p">,</span>
    <span class="n">j_unary_operator</span><span class="p">,</span>
    <span class="n">to_sequence</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.update_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">UpdateGraph</span><span class="p">,</span> <span class="n">auto_locking_ctx</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deephaven.updateby</span><span class="w"> </span><span class="kn">import</span> <span class="n">UpdateByOperation</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeAlias</span>  <span class="c1"># novermin  # noqa</span>

<span class="c1"># Table</span>
<span class="n">_JTable</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.Table&quot;</span><span class="p">)</span>
<span class="n">_JAttributeMap</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.AttributeMap&quot;</span><span class="p">)</span>
<span class="n">_JTableTools</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.util.TableTools&quot;</span><span class="p">)</span>
<span class="n">_JColumnName</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.ColumnName&quot;</span><span class="p">)</span>
<span class="n">_JSortColumn</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.SortColumn&quot;</span><span class="p">)</span>
<span class="n">_JPair</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.Pair&quot;</span><span class="p">)</span>
<span class="n">_JLayoutHintBuilder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.util.LayoutHintBuilder&quot;</span><span class="p">)</span>
<span class="n">_JSearchDisplayMode</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.util.LayoutHintBuilder$SearchDisplayModes&quot;</span>
<span class="p">)</span>
<span class="n">_JSnapshotWhenOptions</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.snapshot.SnapshotWhenOptions&quot;</span><span class="p">)</span>
<span class="n">_JBlinkTableTools</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.impl.BlinkTableTools&quot;</span><span class="p">)</span>
<span class="n">_JDiffItems</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.util.TableDiff$DiffItems&quot;</span><span class="p">)</span>
<span class="n">_JEnumSet</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;java.util.EnumSet&quot;</span><span class="p">)</span>

<span class="c1"># PartitionedTable</span>
<span class="n">_JPartitionedTable</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.PartitionedTable&quot;</span><span class="p">)</span>
<span class="n">_JPartitionedTableFactory</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.PartitionedTableFactory&quot;</span>
<span class="p">)</span>
<span class="n">_JTableDefinition</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.TableDefinition&quot;</span><span class="p">)</span>
<span class="n">_JPartitionedTableProxy</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.PartitionedTable$Proxy&quot;</span>
<span class="p">)</span>
<span class="n">_JJoinMatch</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.JoinMatch&quot;</span><span class="p">)</span>
<span class="n">_JJoinAddition</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.JoinAddition&quot;</span><span class="p">)</span>
<span class="n">_JAsOfJoinRule</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.AsOfJoinRule&quot;</span><span class="p">)</span>
<span class="n">_JNaturalJoinType</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.NaturalJoinType&quot;</span><span class="p">)</span>
<span class="n">_JTableOperations</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.TableOperations&quot;</span><span class="p">)</span>

<span class="c1"># Rollup Table and Tree Table</span>
<span class="n">_JRollupTable</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.hierarchical.RollupTable&quot;</span><span class="p">)</span>
<span class="n">_JTreeTable</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.hierarchical.TreeTable&quot;</span><span class="p">)</span>
<span class="n">_JRollupTableNodeOperationsRecorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.hierarchical.RollupTable$NodeOperationsRecorder&quot;</span>
<span class="p">)</span>
<span class="n">_JTreeTableNodeOperationsRecorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.hierarchical.TreeTable$NodeOperationsRecorder&quot;</span>
<span class="p">)</span>
<span class="n">_JNodeType</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.hierarchical.RollupTable$NodeType&quot;</span><span class="p">)</span>
<span class="n">_JFormatOperationsRecorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.hierarchical.FormatOperationsRecorder&quot;</span>
<span class="p">)</span>
<span class="n">_JSortOperationsRecorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.hierarchical.SortOperationsRecorder&quot;</span>
<span class="p">)</span>
<span class="n">_JFilterOperationsRecorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.hierarchical.FilterOperationsRecorder&quot;</span>
<span class="p">)</span>
<span class="n">_JUpdateViewOperationsRecorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.hierarchical.UpdateViewOperationsRecorder&quot;</span>
<span class="p">)</span>

<span class="c1"># MultiJoin Table and input</span>
<span class="n">_JMultiJoinInput</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.MultiJoinInput&quot;</span><span class="p">)</span>
<span class="n">_JMultiJoinTable</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.MultiJoinTable&quot;</span><span class="p">)</span>
<span class="n">_JMultiJoinFactory</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.MultiJoinFactory&quot;</span><span class="p">)</span>

<span class="c1"># Keyed Transpose Table</span>
<span class="n">_JKeyedTranspose</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.engine.table.impl.util.KeyedTranspose&quot;</span><span class="p">)</span>
<span class="n">_JNewColumnBehaviorType</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span>
    <span class="s2">&quot;io.deephaven.engine.table.impl.util.KeyedTranspose$NewColumnBehavior&quot;</span>
<span class="p">)</span>

<span class="c1"># Selectable</span>
<span class="n">_JSelectable</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">get_type</span><span class="p">(</span><span class="s2">&quot;io.deephaven.api.Selectable&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="Selectable">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Selectable">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Selectable</span><span class="p">(</span><span class="n">ConcurrencyControl</span><span class="p">[</span><span class="s2">&quot;Selectable&quot;</span><span class="p">],</span> <span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Selectable represents a formula with explicit ordering control that affects the order and the parallelization</span>
<span class="sd">    of its evaluation when used in table operations `update`, `select`.</span>

<span class="sd">    Note that, it can only be created with the factory method  `parse`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JSelectable</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_selectable</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_selectable</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_selectable</span> <span class="o">=</span> <span class="n">j_selectable</span>

<div class="viewcode-block" id="Selectable.parse">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Selectable.parse">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Selectable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a Selectable from the given formula string.</span>

<span class="sd">        Args:</span>
<span class="sd">            formula (str): The formula string.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Selectable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Selectable</span><span class="p">(</span><span class="n">j_selectable</span><span class="o">=</span><span class="n">_JSelectable</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">formula</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;failed to create a Selectable: </span><span class="si">{</span><span class="n">formula</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Selectable.with_declared_barriers">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Selectable.with_declared_barriers">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_declared_barriers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">barriers</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Barrier</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Barrier</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Selectable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new Selectable with the given declared barriers.</span>

<span class="sd">        Args:</span>
<span class="sd">            barriers (Union[Barrier, Sequence[Barrier]]): The declared barrier(s).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Selectable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">barriers</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">barriers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Selectable</span><span class="p">(</span>
                <span class="n">j_selectable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_selectable</span><span class="o">.</span><span class="n">withDeclaredBarriers</span><span class="p">(</span><span class="o">*</span><span class="n">barriers</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;failed to create selectable with declared barriers: </span><span class="si">{</span><span class="n">barriers</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Selectable.with_respected_barriers">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Selectable.with_respected_barriers">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_respected_barriers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">barriers</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Barrier</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Barrier</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Selectable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new Selectable with the given respected barriers.</span>

<span class="sd">        Args:</span>
<span class="sd">            barriers (Union[Barrier, Sequence[Barrier]]): The respected barrier(s).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Selectable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">barriers</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">barriers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Selectable</span><span class="p">(</span>
                <span class="n">j_selectable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_selectable</span><span class="o">.</span><span class="n">withRespectedBarriers</span><span class="p">(</span><span class="o">*</span><span class="n">barriers</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;failed to create selectable with respected barriers: </span><span class="si">{</span><span class="n">barriers</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Selectable.with_serial">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Selectable.with_serial">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_serial</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Selectable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new Selectable with serial evaluation enforced.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Selectable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Selectable</span><span class="p">(</span><span class="n">j_selectable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_selectable</span><span class="o">.</span><span class="n">withSerial</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create selectable with serial evaluation.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>
</div>



<div class="viewcode-block" id="NodeType">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.NodeType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NodeType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An enum of node types for RollupTable&quot;&quot;&quot;</span>

    <span class="n">AGGREGATED</span> <span class="o">=</span> <span class="n">_JNodeType</span><span class="o">.</span><span class="n">Aggregated</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Nodes at an aggregated (rolled up) level in the RollupTable. An aggregated level is above the constituent (</span>
<span class="sd">    leaf) level. These nodes have column names and types that result from applying aggregations on the source table</span>
<span class="sd">    of the RollupTable. &quot;&quot;&quot;</span>
    <span class="n">CONSTITUENT</span> <span class="o">=</span> <span class="n">_JNodeType</span><span class="o">.</span><span class="n">Constituent</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Nodes at the leaf level when :meth:`~deephaven.table.Table.rollup` method is called with</span>
<span class="sd">    include_constituent=True. The constituent level is the lowest in a rollup table. These nodes have column names</span>
<span class="sd">    and types from the source table of the RollupTable. &quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="SearchDisplayMode">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.SearchDisplayMode">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SearchDisplayMode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An enum of search display modes for layout hints&quot;&quot;&quot;</span>

    <span class="n">DEFAULT</span> <span class="o">=</span> <span class="n">_JSearchDisplayMode</span><span class="o">.</span><span class="n">Default</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use the system default. This may depend on your user and/or system settings.&quot;&quot;&quot;</span>
    <span class="n">SHOW</span> <span class="o">=</span> <span class="n">_JSearchDisplayMode</span><span class="o">.</span><span class="n">Show</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Permit the search bar to be displayed, regardless of user or system settings.&quot;&quot;&quot;</span>
    <span class="n">HIDE</span> <span class="o">=</span> <span class="n">_JSearchDisplayMode</span><span class="o">.</span><span class="n">Hide</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hide the search bar, regardless of user or system settings.&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="NaturalJoinType">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.NaturalJoinType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NaturalJoinType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An Enum defining ways to handle duplicate right hand table values during natural join operations&quot;&quot;&quot;</span>

    <span class="n">ERROR_ON_DUPLICATE</span> <span class="o">=</span> <span class="n">_JNaturalJoinType</span><span class="o">.</span><span class="n">ERROR_ON_DUPLICATE</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Throw an error if a duplicate right hand table row is found. This is the default behavior if not specified&quot;&quot;&quot;</span>

    <span class="n">FIRST_MATCH</span> <span class="o">=</span> <span class="n">_JNaturalJoinType</span><span class="o">.</span><span class="n">FIRST_MATCH</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match the first right hand table row and ignore later duplicates&quot;&quot;&quot;</span>

    <span class="n">LAST_MATCH</span> <span class="o">=</span> <span class="n">_JNaturalJoinType</span><span class="o">.</span><span class="n">LAST_MATCH</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match the last right hand table row and ignore earlier duplicates&quot;&quot;&quot;</span>

    <span class="n">EXACTLY_ONE_MATCH</span> <span class="o">=</span> <span class="n">_JNaturalJoinType</span><span class="o">.</span><span class="n">EXACTLY_ONE_MATCH</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match exactly one right hand table row; throw an error if there are zero or more than one matches&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="NewColumnBehaviorType">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.NewColumnBehaviorType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NewColumnBehaviorType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An enum of behavior types for new columns introduced while ticking&quot;&quot;&quot;</span>

    <span class="n">FAIL</span> <span class="o">=</span> <span class="n">_JNewColumnBehaviorType</span><span class="o">.</span><span class="n">FAIL</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The result table reports an error when a new column is detected. This is the default behavior, which ensures</span>
<span class="sd">    consistency between the result and a newly created keyed_transpose.&quot;&quot;&quot;</span>
    <span class="n">IGNORE</span> <span class="o">=</span> <span class="n">_JNewColumnBehaviorType</span><span class="o">.</span><span class="n">IGNORE</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The result table ignores the new column. If a new column would have been created, then the result table</span>
<span class="sd">    becomes inconsistent with a newly created keyed_transpose.&quot;&quot;&quot;</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">_FormatOperationsRecorder</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mixin for creating format operations to be applied to individual nodes of either RollupTable or TreeTable.&quot;&quot;&quot;</span>

    <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">format_column</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.format_columns` operation applied to nodes.&quot;&quot;&quot;</span>
        <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
        <span class="n">j_format_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JFormatOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">j_format_ops_recorder</span><span class="o">.</span><span class="n">formatColumns</span><span class="p">(</span><span class="n">formulas</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">format_row_where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cond</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.format_row_where` operation applied to</span>
<span class="sd">        nodes.&quot;&quot;&quot;</span>
        <span class="n">j_format_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JFormatOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">j_format_ops_recorder</span><span class="o">.</span><span class="n">formatRowWhere</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span> <span class="n">formula</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">format_column_where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cond</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.format_column_where` operation applied to</span>
<span class="sd">        nodes.&quot;&quot;&quot;</span>
        <span class="n">j_format_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JFormatOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span>
            <span class="n">j_format_ops_recorder</span><span class="o">.</span><span class="n">formatColumnWhere</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">cond</span><span class="p">,</span> <span class="n">formula</span><span class="p">)</span>
        <span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_SortOperationsRecorder</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mixin for creating sort operations to be applied to individual nodes of either RollupTable or</span>
<span class="sd">    TreeTable.&quot;&quot;&quot;</span>

    <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.sort` operation applied to nodes.&quot;&quot;&quot;</span>
        <span class="n">order_by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
        <span class="n">j_sort_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JSortOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">j_sort_ops_recorder</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">order_by</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sort_descending</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.sort_descending` applied to nodes.&quot;&quot;&quot;</span>
        <span class="n">order_by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
        <span class="n">j_sort_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JSortOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">j_sort_ops_recorder</span><span class="o">.</span><span class="n">sortDescending</span><span class="p">(</span><span class="n">order_by</span><span class="p">))</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_FilterOperationsRecorder</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mixin for creating filter operations to be applied to individual nodes of either RollupTable or</span>
<span class="sd">    TreeTable.&quot;&quot;&quot;</span>

    <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.where` operation applied to nodes.&quot;&quot;&quot;</span>
        <span class="n">j_filter_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JFilterOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">j_filter_ops_recorder</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">.</span><span class="n">j_filter</span><span class="p">))</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_UpdateViewOperationsRecorder</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A mixin for creating updateView operations to be applied to individual nodes of RollupTable.&quot;&quot;&quot;</span>

    <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new recorder with the :meth:`~deephaven.table.Table.update_view` operation applied to nodes.&quot;&quot;&quot;</span>
        <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
        <span class="n">j_update_view_ops_recorder</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span><span class="p">,</span> <span class="n">_JUpdateViewOperationsRecorder</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">j_update_view_ops_recorder</span><span class="o">.</span><span class="n">updateView</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>


<div class="viewcode-block" id="RollupNodeOperationsRecorder">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.RollupNodeOperationsRecorder">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RollupNodeOperationsRecorder</span><span class="p">(</span>
    <span class="n">JObjectWrapper</span><span class="p">,</span>
    <span class="n">_FormatOperationsRecorder</span><span class="p">,</span>
    <span class="n">_SortOperationsRecorder</span><span class="p">,</span>
    <span class="n">_UpdateViewOperationsRecorder</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recorder for node-level operations to be applied when gathering snapshots of RollupTable. Supported operations</span>
<span class="sd">    include column formatting and sorting.</span>

<span class="sd">    Note: It should not be instantiated directly. User code must call :meth:`~RollupTable.node_operation_recorder` to</span>
<span class="sd">    create an instance of the recorder.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JRollupTableNodeOperationsRecorder</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span> <span class="o">=</span> <span class="n">j_node_ops_recorder</span></div>



<div class="viewcode-block" id="RollupTable">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.RollupTable">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RollupTable</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A RollupTable is generated as a result of applying the :meth:`~deephaven.table.Table.rollup` operation on a</span>
<span class="sd">    :class:`~deephaven.table.Table`.</span>

<span class="sd">    A RollupTable aggregates by the grouping columns, and then creates a hierarchical table which re-aggregates</span>
<span class="sd">    using one less grouping column on each level.</span>

<span class="sd">    Note: RollupTable should not be instantiated directly by user code.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JRollupTable</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_rollup_table</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">j_rollup_table</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">,</span>
        <span class="n">aggs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">],</span>
        <span class="n">include_constituents</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_rollup_table</span> <span class="o">=</span> <span class="n">j_rollup_table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aggs</span> <span class="o">=</span> <span class="n">aggs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">include_constituents</span> <span class="o">=</span> <span class="n">include_constituents</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">by</span> <span class="o">=</span> <span class="n">by</span>

<div class="viewcode-block" id="RollupTable.node_operation_recorder">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.RollupTable.node_operation_recorder">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_operation_recorder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node_type</span><span class="p">:</span> <span class="n">NodeType</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RollupNodeOperationsRecorder</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a RollupNodeOperationsRecorder for per-node operations to apply during Deephaven UI driven</span>
<span class="sd">        snapshotting of this RollupTable. The recorded node operations will be applied only to the node of the</span>
<span class="sd">        provided NodeType. See :class:`NodeType` for details.</span>

<span class="sd">        Args:</span>
<span class="sd">            node_type (NodeType): the type of node tables that the recorded operations will be applied to; if it is</span>
<span class="sd">                :attr:`NodeType.CONSTITUENT`, the RollupTable must be created with include_constituents=True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a RollupNodeOperationsRecorder</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RollupNodeOperationsRecorder</span><span class="p">(</span>
                <span class="n">j_node_ops_recorder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_rollup_table</span><span class="o">.</span><span class="n">makeNodeOperationsRecorder</span><span class="p">(</span>
                    <span class="n">node_type</span><span class="o">.</span><span class="n">value</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create a RollupNodeOperationsRecorder.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="RollupTable.with_node_operations">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.RollupTable.with_node_operations">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_node_operations</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">recorders</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">RollupNodeOperationsRecorder</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RollupTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new RollupTable that will apply the recorded node operations to nodes when gathering</span>
<span class="sd">        snapshots requested by the Deephaven UI.</span>

<span class="sd">        Args:</span>
<span class="sd">            recorders (Sequence[RollupNodeOperationsRecorder]): a list of RollupNodeOperationsRecorder containing</span>
<span class="sd">                the node operations to be applied, they must be ones created by calling the &#39;node_operation_recorder&#39;</span>
<span class="sd">                method on the same table.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new RollupTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RollupTable</span><span class="p">(</span>
                <span class="n">j_rollup_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_rollup_table</span><span class="o">.</span><span class="n">withNodeOperations</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">op</span><span class="o">.</span><span class="n">j_node_ops_recorder</span> <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">recorders</span><span class="p">]</span>
                <span class="p">),</span>
                <span class="n">include_constituents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">include_constituents</span><span class="p">,</span>
                <span class="n">aggs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">aggs</span><span class="p">,</span>
                <span class="n">by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">by</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;with_node_operations on RollupTable failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="RollupTable.with_filters">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.RollupTable.with_filters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_filters</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RollupTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new RollupTable by applying the given set of filters to the group-by columns of this RollupTable.</span>

<span class="sd">        Args:</span>
<span class="sd">            filters (Union[str, Filter, Sequence[str], Sequence[Filter]]): the filter condition</span>
<span class="sd">                expression(s) or Filter object(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new RollupTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RollupTable</span><span class="p">(</span>
                <span class="n">j_rollup_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_rollup_table</span><span class="o">.</span><span class="n">withFilter</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">.</span><span class="n">j_filter</span><span class="p">),</span>
                <span class="n">include_constituents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">include_constituents</span><span class="p">,</span>
                <span class="n">aggs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">aggs</span><span class="p">,</span>
                <span class="n">by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">by</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;with_filters operation on RollupTable failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="RollupTable.with_update_view">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.RollupTable.with_update_view">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_update_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">RollupTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new RollupTable by applying the given set of filters to the group-by columns of this RollupTable.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): the column formula(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new RollupTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RollupTable</span><span class="p">(</span>
                <span class="n">j_rollup_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_rollup_table</span><span class="o">.</span><span class="n">withUpdateView</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">),</span>
                <span class="n">include_constituents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">include_constituents</span><span class="p">,</span>
                <span class="n">aggs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">aggs</span><span class="p">,</span>
                <span class="n">by</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">by</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;with_update_view operation on RollupTable failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>
</div>



<div class="viewcode-block" id="TreeNodeOperationsRecorder">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TreeNodeOperationsRecorder">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TreeNodeOperationsRecorder</span><span class="p">(</span>
    <span class="n">JObjectWrapper</span><span class="p">,</span>
    <span class="n">_FormatOperationsRecorder</span><span class="p">,</span>
    <span class="n">_SortOperationsRecorder</span><span class="p">,</span>
    <span class="n">_FilterOperationsRecorder</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Recorder for node-level operations to be applied when gathering snapshots of TreeTable. Supported operations</span>
<span class="sd">    include column formatting, sorting, and filtering.</span>

<span class="sd">    Note: It should not be instantiated directly. User code must call :meth:`~TreeTable.node_operation_recorder` to</span>
<span class="sd">    create an instance of the recorder.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JTreeTableNodeOperationsRecorder</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_node_ops_recorder</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_node_ops_recorder</span> <span class="o">=</span> <span class="n">j_node_ops_recorder</span></div>



<div class="viewcode-block" id="TreeTable">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TreeTable">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TreeTable</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A TreeTable is generated as a result of applying the :meth:`~Table.tree` method on a</span>
<span class="sd">    :class:`~deephaven.table.Table`.</span>

<span class="sd">    A TreeTable presents a hierarchically structured  &quot;tree&quot; view of a table where parent-child relationships are</span>
<span class="sd">    expressed</span>
<span class="sd">    by an &quot;id&quot; and a &quot;parent&quot; column. The id column should represent a unique identifier for a given row, and the parent</span>
<span class="sd">    column indicates which row is the parent for a given row.</span>

<span class="sd">    Note: TreeTable should not be instantiated directly by user code.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JTreeTable</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_tree_table</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_tree_table</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">,</span> <span class="n">id_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_tree_table</span> <span class="o">=</span> <span class="n">j_tree_table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id_col</span> <span class="o">=</span> <span class="n">id_col</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_col</span> <span class="o">=</span> <span class="n">parent_col</span>

<div class="viewcode-block" id="TreeTable.node_operation_recorder">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TreeTable.node_operation_recorder">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">node_operation_recorder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TreeNodeOperationsRecorder</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a TreepNodeOperationsRecorder for per-node operations to apply during Deephaven UI driven</span>
<span class="sd">        snapshotting of this TreeTable.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a TreeNodeOperationsRecorder</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TreeNodeOperationsRecorder</span><span class="p">(</span>
            <span class="n">j_node_ops_recorder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_tree_table</span><span class="o">.</span><span class="n">makeNodeOperationsRecorder</span><span class="p">()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="TreeTable.with_node_operations">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TreeTable.with_node_operations">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_node_operations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recorder</span><span class="p">:</span> <span class="n">TreeNodeOperationsRecorder</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TreeTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new TreeTable that will apply the recorded node operations to nodes when gathering snapshots</span>
<span class="sd">        requested by the Deephaven UI.</span>

<span class="sd">        Args:</span>
<span class="sd">            recorder (TreeNodeOperationsRecorder): the TreeNodeOperationsRecorder containing the node operations to be</span>
<span class="sd">                applied, it must be created by calling the &#39;node_operation_recorder&#39; method on the same table.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new TreeTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreeTable</span><span class="p">(</span>
                <span class="n">j_tree_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_tree_table</span><span class="o">.</span><span class="n">withNodeOperations</span><span class="p">(</span>
                    <span class="n">recorder</span><span class="o">.</span><span class="n">j_node_ops_recorder</span>
                <span class="p">),</span>
                <span class="n">id_col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id_col</span><span class="p">,</span>
                <span class="n">parent_col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_col</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;with_node_operations on TreeTable failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="TreeTable.with_filters">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TreeTable.with_filters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_filters</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TreeTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new TreeTable by applying the given set of filters to the columns of this TreeTable.</span>

<span class="sd">        Args:</span>
<span class="sd">            filters (Union[str, Filter, Sequence[str], Sequence[Filter]]): the filter condition</span>
<span class="sd">                expression(s) or Filter object(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new TreeTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TreeTable</span><span class="p">(</span>
                <span class="n">j_tree_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_tree_table</span><span class="o">.</span><span class="n">withFilter</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">.</span><span class="n">j_filter</span><span class="p">),</span>
                <span class="n">id_col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id_col</span><span class="p">,</span>
                <span class="n">parent_col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_col</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;with_filters operation on TreeTable failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>
</div>



<span class="k">def</span><span class="w"> </span><span class="nf">_query_scope_agg_ctx</span><span class="p">(</span>
    <span class="n">aggs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">AbstractContextManager</span><span class="p">:</span>
    <span class="n">cm</span><span class="p">:</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">AbstractContextManager</span>
    <span class="n">has_agg_formula</span> <span class="o">=</span> <span class="nb">any</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">is_formula</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">has_agg_formula</span><span class="p">:</span>
        <span class="n">cm</span> <span class="o">=</span> <span class="n">query_scope_ctx</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cm</span> <span class="o">=</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">nullcontext</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">cm</span>


<div class="viewcode-block" id="SortDirection">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.SortDirection">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SortDirection</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An enum defining the sorting orders.&quot;&quot;&quot;</span>

    <span class="n">DESCENDING</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
    <span class="n">ASCENDING</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span></div>



<span class="k">def</span><span class="w"> </span><span class="nf">_sort_column</span><span class="p">(</span><span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dir_</span><span class="p">:</span> <span class="n">SortDirection</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">_JSortColumn</span><span class="o">.</span><span class="n">desc</span><span class="p">(</span><span class="n">_JColumnName</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">col</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">dir_</span> <span class="o">==</span> <span class="n">SortDirection</span><span class="o">.</span><span class="n">DESCENDING</span>
        <span class="k">else</span> <span class="n">_JSortColumn</span><span class="o">.</span><span class="n">asc</span><span class="p">(</span><span class="n">_JColumnName</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">col</span><span class="p">))</span>
    <span class="p">)</span>


<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeAlias</span>  <span class="c1"># novermin  # noqa</span>

    <span class="n">TableDefinitionLike</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
        <span class="s2">&quot;TableDefinition&quot;</span><span class="p">,</span>
        <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">dtypes</span><span class="o">.</span><span class="n">DType</span><span class="p">],</span>
        <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">],</span>
        <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">,</span>
    <span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Union representing objects that can be coerced into a TableDefinition.&quot;&quot;&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">TableDefinitionLike</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
        <span class="s2">&quot;TableDefinition&quot;</span><span class="p">,</span>
        <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">dtypes</span><span class="o">.</span><span class="n">DType</span><span class="p">],</span>
        <span class="n">Iterable</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">],</span>
        <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">,</span>
    <span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Union representing objects that can be coerced into a TableDefinition.&quot;&quot;&quot;</span>


<div class="viewcode-block" id="TableDefinition">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TableDefinition">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TableDefinition</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Deephaven table definition, as a mapping from column name to ColumnDefinition.&quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JTableDefinition</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_to_j_table_definition</span><span class="p">(</span><span class="n">table_definition</span><span class="p">:</span> <span class="n">TableDefinitionLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table_definition</span><span class="p">,</span> <span class="n">TableDefinition</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">table_definition</span><span class="o">.</span><span class="n">j_table_definition</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table_definition</span><span class="p">,</span> <span class="n">_JTableDefinition</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">table_definition</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table_definition</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">table_definition</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Expected TableDefinitionLike Mapping to contain str keys, found type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="k">for</span> <span class="n">data_type</span> <span class="ow">in</span> <span class="n">table_definition</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data_type</span><span class="p">,</span> <span class="n">dtypes</span><span class="o">.</span><span class="n">DType</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Expected TableDefinitionLike Mapping to contain DType values, found type &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="n">column_definitions</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">col_def</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data_type</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data_type</span> <span class="ow">in</span> <span class="n">table_definition</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table_definition</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">column_definition</span> <span class="ow">in</span> <span class="n">table_definition</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">column_definition</span><span class="p">,</span> <span class="n">ColumnDefinition</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Expected TableDefinitionLike Iterable to contain ColumnDefinition values, found type &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">column_definition</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
            <span class="n">column_definitions</span> <span class="o">=</span> <span class="n">table_definition</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unexpected TableDefinitionLike type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">table_definition</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">_JTableDefinition</span><span class="o">.</span><span class="n">of</span><span class="p">(</span>
            <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">j_column_definition</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">column_definitions</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_definition</span><span class="p">:</span> <span class="n">TableDefinitionLike</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Construct a TableDefinition.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_definition (TableDefinitionLike): The table definition like object</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new TableDefinition</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_table_definition</span> <span class="o">=</span> <span class="n">TableDefinition</span><span class="o">.</span><span class="n">_to_j_table_definition</span><span class="p">(</span>
            <span class="n">table_definition</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table_definition</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This table definition as a table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">_JTableTools</span><span class="o">.</span><span class="n">metaTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table_definition</span><span class="p">))</span>

<div class="viewcode-block" id="TableDefinition.keys">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TableDefinition.keys">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column names as a dictview.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>


<div class="viewcode-block" id="TableDefinition.items">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TableDefinition.items">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column name, column definition tuples as a dictview.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span></div>


<div class="viewcode-block" id="TableDefinition.values">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.TableDefinition.values">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column definitions as a dictview.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span></div>


    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ColumnDefinition</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">col</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">col</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="n">ColumnDefinition</span><span class="p">(</span><span class="n">j_col</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j_col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table_definition</span><span class="o">.</span><span class="n">getColumnsArray</span><span class="p">()</span>
            <span class="p">]</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ColumnDefinition</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">JObjectWrapper</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">JObjectWrapper</span><span class="o">.</span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">JObjectWrapper</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>



<div class="viewcode-block" id="Table">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Table</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Table represents a Deephaven table. It allows applications to perform powerful Deephaven table operations.</span>

<span class="sd">    Note: It should not be instantiated directly by user code. Tables are mostly created by factory methods,</span>
<span class="sd">    data ingestion operations, queries, aggregations, joins, etc.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JTable</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_table</span><span class="p">:</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">j_table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_object_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="s2">&quot;j_table type is not io.deephaven.engine.table.Table&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_definition</span> <span class="o">=</span> <span class="n">TableDefinition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">getDefinition</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">default_repr</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
        <span class="c1"># default_repr is in a format like so:</span>
        <span class="c1"># deephaven.table.Table(io.deephaven.engine.table.Table(objectRef=0x7f07e4890518))</span>
        <span class="c1"># We take the last two brackets off, add a few more details about the table, then add the necessary brackets</span>
        <span class="c1"># back</span>
        <span class="n">column_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">col</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">col</span><span class="o">.</span><span class="n">data_type</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">10</span><span class="p">]}</span>
        <span class="n">repr_str</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">default_repr</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">, num_rows = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="si">}</span><span class="s2">, columns = </span><span class="si">{</span><span class="n">column_dict</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="c1"># We need to add the two brackets back, and also truncate it to be 120 char total (118 + two brackets)</span>
        <span class="n">repr_str</span> <span class="o">=</span> <span class="n">repr_str</span><span class="p">[:</span><span class="mi">114</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...}))&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">repr_str</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">118</span> <span class="k">else</span> <span class="n">repr_str</span> <span class="o">+</span> <span class="s2">&quot;))&quot;</span>
        <span class="k">return</span> <span class="n">repr_str</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The current number of rows in the table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_refreshing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether this table is refreshing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">isRefreshing</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_blink</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether this table is a blink table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_JBlinkTableTools</span><span class="o">.</span><span class="n">isBlink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_failed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether this table is in a failure state and is no longer usable.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">isFailed</span><span class="p">()</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateGraph</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The update graph of the table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UpdateGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">getUpdateGraph</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_flat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether this table is guaranteed to be flat, i.e. its row set will be from 0 to number of rows - 1.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">isFlat</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">definition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The table definition.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_definition</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">column_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column names of the table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column definitions of the table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">definition</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">meta_table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column definitions of the table in a Table form.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">meta</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span>

<div class="viewcode-block" id="Table.iter_dict">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.iter_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iter_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator that reads one row at a time from the table into a dictionary. The dictionary is a map</span>
<span class="sd">        of column names to scalar values of the column data type.</span>

<span class="sd">        If the table is refreshing and no update graph locks are currently being held, the generator will try to acquire</span>
<span class="sd">        the shared lock of the update graph before reading the table data. This provides a consistent view of the data.</span>
<span class="sd">        The side effect of this is that the table will not be able to refresh while the table is being iterated on.</span>
<span class="sd">        Additionally, the generator internally maintains a fill context. The auto acquired shared lock and the fill</span>
<span class="sd">        context will be released after the generator is destroyed. That can happen implicitly when the generator</span>
<span class="sd">        is used in a for-loop. When the generator is not used in a for-loop, to prevent resource leaks, it must be</span>
<span class="sd">        closed</span>
<span class="sd">        after use by either (1) setting it to None, (2) using the del statement, or (3) calling the close() method on</span>
<span class="sd">        it.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Optional[Union[str, Sequence[str]]]): The columns to read. If None, all columns are read.</span>
<span class="sd">            chunk_size (int): The number of rows to read at a time internally to reduce the number of Java/Python</span>
<span class="sd">            boundary</span>
<span class="sd">                crossings. Default is 2048.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator that yields a dictionary of column names to scalar values.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deephaven._table_reader</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">_table_reader_row_dict</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># to prevent circular import</span>

        <span class="k">return</span> <span class="n">_table_reader_row_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">)</span></div>


<div class="viewcode-block" id="Table.iter_tuple">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.iter_tuple">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iter_tuple</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">tuple_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Deephaven&quot;</span><span class="p">,</span>
        <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator that reads one row at a time from the table into a named tuple. The named tuple is made</span>
<span class="sd">        up of fields with their names being the column names and their values being of the column data types.</span>

<span class="sd">        If the table is refreshing and no update graph locks are currently being held, the generator will try to acquire</span>
<span class="sd">        the shared lock of the update graph before reading the table data. This provides a consistent view of the data.</span>
<span class="sd">        The side effect of this is that the table will not be able to refresh while the table is being iterated on.</span>
<span class="sd">        Additionally, the generator internally maintains a fill context. The auto acquired shared lock and the fill</span>
<span class="sd">        context will be released after the generator is destroyed. That can happen implicitly when the generator</span>
<span class="sd">        is used in a for-loop. When the generator is not used in a for-loop, to prevent resource leaks, it must be</span>
<span class="sd">        closed</span>
<span class="sd">        after use by either (1) setting it to None, (2) using the del statement, or (3) calling the close() method on</span>
<span class="sd">        it.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Optional[Union[str, Sequence[str]]]): The columns to read. If None, all columns are read. Default</span>
<span class="sd">            is None.</span>
<span class="sd">            tuple_name (str): The name of the named tuple. Default is &#39;Deephaven&#39;.</span>
<span class="sd">            chunk_size (int): The number of rows to read at a time internally to reduce the number of Java/Python</span>
<span class="sd">            boundary</span>
<span class="sd">                crossings. Default is 2048.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator that yields a named tuple for each row in the table</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deephaven._table_reader</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">_table_reader_row_tuple</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># to prevent circular import</span>

        <span class="k">return</span> <span class="n">_table_reader_row_tuple</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">tuple_name</span><span class="o">=</span><span class="n">tuple_name</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Table.iter_chunk_dict">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.iter_chunk_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iter_chunk_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2048</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator that reads one chunk of rows at a time from the table into a dictionary. The dictionary</span>
<span class="sd">        is a map of column names to numpy arrays of the column data type.</span>

<span class="sd">        If the table is refreshing and no update graph locks are currently being held, the generator will try to acquire</span>
<span class="sd">        the shared lock of the update graph before reading the table data. This provides a consistent view of the data.</span>
<span class="sd">        The side effect of this is that the table will not be able to refresh while the table is being iterated on.</span>
<span class="sd">        Additionally, the generator internally maintains a fill context. The auto acquired shared lock and the fill</span>
<span class="sd">        context will be released after the generator is destroyed. That can happen implicitly when the generator</span>
<span class="sd">        is used in a for-loop. When the generator is not used in a for-loop, to prevent resource leaks, it must be</span>
<span class="sd">        closed</span>
<span class="sd">        after use by either (1) setting it to None, (2) using the del statement, or (3) calling the close() method on</span>
<span class="sd">        it.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Optional[Union[str, Sequence[str]]]): The columns to read. If None, all columns are read.</span>
<span class="sd">            chunk_size (int): The number of rows to read at a time. Default is 2048.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator that yields a dictionary of column names to numpy arrays.</span>

<span class="sd">        Raises</span>
<span class="sd">            ValueError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deephaven._table_reader</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">_table_reader_chunk_dict</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># to prevent circular import</span>

        <span class="k">return</span> <span class="n">_table_reader_chunk_dict</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">cols</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span>
            <span class="n">row_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">getRowSet</span><span class="p">(),</span>
            <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">,</span>
            <span class="n">prev</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Table.iter_chunk_tuple">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.iter_chunk_tuple">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">iter_chunk_tuple</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tuple_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Deephaven&quot;</span><span class="p">,</span>
        <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2048</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a generator that reads one chunk of rows at a time from the table into a named tuple. The named</span>
<span class="sd">        tuple is made up of fields with their names being the column names and their values being numpy arrays of the</span>
<span class="sd">        column data types.</span>

<span class="sd">        If the table is refreshing and no update graph locks are currently being held, the generator will try to acquire</span>
<span class="sd">        the shared lock of the update graph before reading the table data. This provides a consistent view of the data.</span>
<span class="sd">        The side effect of this is that the table will not be able to refresh while the table is being iterated on.</span>
<span class="sd">        Additionally, the generator internally maintains a fill context. The auto acquired shared lock and the fill</span>
<span class="sd">        context will be released after the generator is destroyed. That can happen implicitly when the generator</span>
<span class="sd">        is used in a for-loop. When the generator is not used in a for-loop, to prevent resource leaks, it must be</span>
<span class="sd">        closed</span>
<span class="sd">        after use by either (1) setting it to None, (2) using the del statement, or (3) calling the close() method on</span>
<span class="sd">        it.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Optional[Union[str, Sequence[str]]]): The columns to read. If None, all columns are read.</span>
<span class="sd">            tuple_name (str): The name of the named tuple. Default is &#39;Deephaven&#39;.</span>
<span class="sd">            chunk_size (int): The number of rows to read at a time. Default is 2048.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A generator that yields a named tuple for each row in the table.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deephaven._table_reader</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
            <span class="n">_table_reader_chunk_tuple</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># to prevent circular import</span>

        <span class="k">return</span> <span class="n">_table_reader_chunk_tuple</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="n">cols</span><span class="p">,</span> <span class="n">tuple_name</span><span class="o">=</span><span class="n">tuple_name</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Table.has_columns">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.has_columns">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether this table contains a column for each of the provided names, return False if any of the columns is</span>
<span class="sd">        not in the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">hasColumns</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span></div>


<div class="viewcode-block" id="Table.attributes">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.attributes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all the attributes defined on the table.&quot;&quot;&quot;</span>
        <span class="n">j_map</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">_JAttributeMap</span><span class="p">)</span><span class="o">.</span><span class="n">getAttributes</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">j_map_to_dict</span><span class="p">(</span><span class="n">j_map</span><span class="p">)</span></div>


<div class="viewcode-block" id="Table.with_attributes">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.with_attributes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">with_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new Table that has the provided attributes defined on it and shares the underlying data and schema</span>
<span class="sd">        with this table.</span>

<span class="sd">        Note, the table attributes are immutable once defined, and are mostly used internally by the Deephaven</span>
<span class="sd">        engine. For advanced users, certain predefined plug-in attributes provide a way to extend Deephaven with</span>
<span class="sd">        custom-built plug-ins.</span>

<span class="sd">        Args:</span>
<span class="sd">            attrs (dict[str, Any]): a dict of table attribute names and their values</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new Table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">j_map</span> <span class="o">=</span> <span class="n">j_hashmap</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                <span class="n">j_table</span><span class="o">=</span><span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">_JAttributeMap</span><span class="p">)</span><span class="o">.</span><span class="n">withAttributes</span><span class="p">(</span><span class="n">j_map</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create a table with attributes.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.without_attributes">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.without_attributes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">without_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new Table that shares the underlying data and schema with this table but with the specified</span>
<span class="sd">        attributes removed.</span>

<span class="sd">        Args:</span>
<span class="sd">            attrs (Union[str, Sequence[str]]): the attribute name(s) to be removed</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new Table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">j_attrs</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">attrs</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                <span class="n">j_table</span><span class="o">=</span><span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">_JAttributeMap</span><span class="p">)</span><span class="o">.</span><span class="n">withoutAttributes</span><span class="p">(</span>
                    <span class="n">j_attrs</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create a table without attributes.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.to_string">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.to_string">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the first few rows of a table as a pipe-delimited string.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the beginning of the table</span>
<span class="sd">            cols (Optional[Union[str, Sequence[str]]]): the column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            string</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_JTableTools</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">,</span> <span class="o">*</span><span class="n">cols</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table to_string failed&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.coalesce">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.coalesce">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">coalesce</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a coalesced child table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">coalesce</span><span class="p">())</span></div>


<div class="viewcode-block" id="Table.flatten">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.flatten">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">flatten</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a new version of this table with a flat row set, i.e. from 0 to number of rows - 1.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span></div>


<div class="viewcode-block" id="Table.remove_blink">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.remove_blink">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_blink</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a non-blink child table, or this table if it is not a blink table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">removeBlink</span><span class="p">())</span></div>


<div class="viewcode-block" id="Table.snapshot">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.snapshot">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">snapshot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a static snapshot table.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">snapshot</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;failed to create a snapshot.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.snapshot_when">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.snapshot_when">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">snapshot_when</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">trigger_table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">stamp_cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">incremental</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a table that captures a snapshot of this table whenever trigger_table updates.</span>

<span class="sd">        When trigger_table updates, a snapshot of this table and the &quot;stamp key&quot; from trigger_table form the resulting</span>
<span class="sd">        table. The &quot;stamp key&quot; is the last row of the trigger_table, limited by the stamp_cols. If trigger_table is</span>
<span class="sd">        empty, the &quot;stamp key&quot; will be represented by NULL values.</span>

<span class="sd">        Note: the trigger_table must be append-only when the history flag is set to True. If the trigger_table is not</span>
<span class="sd">        append-only and has modified or removed rows in its updates, the result snapshot table will be put in a failure</span>
<span class="sd">        state and become unusable.</span>

<span class="sd">        Args:</span>
<span class="sd">            trigger_table (Table): the trigger table</span>
<span class="sd">            stamp_cols (Optional[Union[str, Sequence[str]]]): The columns from trigger_table that form the &quot;stamp key&quot;, may be</span>
<span class="sd">                renames. None, or empty, means that all columns from trigger_table form the &quot;stamp key&quot;.</span>
<span class="sd">            initial (bool): Whether to take an initial snapshot upon construction, default is False. When False, the</span>
<span class="sd">                resulting table will remain empty until trigger_table first updates.</span>
<span class="sd">            incremental (bool): Whether the resulting table should be incremental, default is False. When False, all</span>
<span class="sd">                rows of this table will have the latest &quot;stamp key&quot;. When True, only the rows of this table that have</span>
<span class="sd">                been added or updated will have the latest &quot;stamp key&quot;.</span>
<span class="sd">            history (bool): Whether the resulting table should keep history, default is False. A history table appends a</span>
<span class="sd">                full snapshot of this table and the &quot;stamp key&quot; as opposed to updating existing rows. The history flag</span>
<span class="sd">                is currently incompatible with initial and incremental: when history is True, incremental and initial</span>
<span class="sd">                must be False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">_JSnapshotWhenOptions</span><span class="o">.</span><span class="n">of</span><span class="p">(</span>
                <span class="n">initial</span><span class="p">,</span> <span class="n">incremental</span><span class="p">,</span> <span class="n">history</span><span class="p">,</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">stamp_cols</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                    <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">snapshotWhen</span><span class="p">(</span><span class="n">trigger_table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;failed to create a snapshot_when table.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="c1">#</span>
    <span class="c1"># Table operation category: Select</span>
    <span class="c1">#</span>
    <span class="c1"># region Select</span>
<div class="viewcode-block" id="Table.drop_columns">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.drop_columns">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">drop_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The drop_columns method creates a new table with the same size as this table but omits any of specified</span>
<span class="sd">        columns.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">dropColumns</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table drop_columns operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.move_columns">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.move_columns">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">move_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The move_columns method creates a new table with specified columns moved to a specific column index value.</span>
<span class="sd">        Columns may be renamed with the same semantics as rename_columns. The renames are simultaneous and unordered,</span>
<span class="sd">        enabling direct swaps between column names. Specifying a source or destination more than once is prohibited.</span>

<span class="sd">        Args:</span>
<span class="sd">            idx (int): the column index where the specified columns will be moved in the new table.</span>
<span class="sd">            cols (Union[str, Sequence[str]]) : the column name(s) or the column rename expr(s) as &quot;X = Y&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">moveColumns</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table move_columns operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.move_columns_down">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.move_columns_down">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">move_columns_down</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The move_columns_down method creates a new table with specified columns appearing last in order, to the far</span>
<span class="sd">        right. Columns may be renamed with the same semantics as rename_columns. The renames are simultaneous and</span>
<span class="sd">        unordered, enabling direct swaps between column names. Specifying a source or destination more than once is</span>
<span class="sd">        prohibited.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Union[str, Sequence[str]]) : the column name(s) or the column rename expr(s) as &quot;X = Y&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">moveColumnsDown</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table move_columns_down operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.move_columns_up">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.move_columns_up">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">move_columns_up</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The move_columns_up method creates a new table with specified columns appearing first in order, to the far</span>
<span class="sd">        left. Columns may be renamed with the same semantics as rename_columns. The renames are simultaneous and</span>
<span class="sd">        unordered, enabling direct swaps between column names. Specifying a source or destination more than once is</span>
<span class="sd">        prohibited.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Union[str, Sequence[str]]) : the column name(s) or the column rename expr(s) as &quot;X = Y&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">moveColumnsUp</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table move_columns_up operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.rename_columns">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.rename_columns">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rename_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The rename_columns method creates a new table with the specified columns renamed. The renames are</span>
<span class="sd">        simultaneous and unordered, enabling direct swaps between column names. Specifying a source or</span>
<span class="sd">        destination more than once is prohibited. If a new column name conflicts with an existing column</span>
<span class="sd">        name in the table, the existing column will be silently replaced.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Union[str, Sequence[str]]) : the column rename expr(s) as &quot;X = Y&quot;</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">renameColumns</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table rename_columns operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.update">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Selectable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Selectable</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The update method creates a new table containing a new, in-memory column for each formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str], Selectable, Sequence[Selectable]]): the column formula(s) or</span>
<span class="sd">            Selectable(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">formulas</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Selectable</span><span class="o">.</span><span class="n">j_object_type</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">j_array_list</span><span class="p">(</span><span class="n">formulas</span><span class="p">)))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table update operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.lazy_update">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.lazy_update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">lazy_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The lazy_update method creates a new table containing a new, cached, formula column for each formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): the column formula(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">lazyUpdate</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table lazy_update operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.view">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.view">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The view method creates a new formula table that includes one column for each formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): the column formula(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table view operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.update_view">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.update_view">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The update_view method creates a new table containing a new, formula column for each formula.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): the column formula(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">updateView</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table update_view operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.select">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.select">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">formulas</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Selectable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Selectable</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The select method creates a new in-memory table that includes one column for each formula. If no formula</span>
<span class="sd">        is specified, all columns will be included.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Optional[Union[str, Sequence[str], Selectable, Sequence[Selectable]]]): the column formula(s)</span>
<span class="sd">                or Selectable(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">formulas</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">select</span><span class="p">())</span>

                <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">formulas</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Selectable</span><span class="o">.</span><span class="n">j_object_type</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">j_array_list</span><span class="p">(</span><span class="n">formulas</span><span class="p">)))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table select operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.select_distinct">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.select_distinct">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">select_distinct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The select_distinct method creates a new table containing all the unique values for a set of key</span>
<span class="sd">        columns. When the selectDistinct method is used on multiple columns, it looks for distinct sets of values in</span>
<span class="sd">        the selected columns.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Optional[Union[str, Sequence[str]]]): the column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">selectDistinct</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table select_distinct operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="c1"># endregion</span>

    <span class="c1">#</span>
    <span class="c1"># Table operation category: Filter</span>
    <span class="c1">#</span>
    <span class="c1"># region Filter</span>

<div class="viewcode-block" id="Table.where">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.where">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The where method creates a new table with only the rows meeting the filter criteria in the column(s) of</span>
<span class="sd">        the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            filters (Optional[Union[str, Filter, Sequence[str], Sequence[Filter]]]): the filter condition</span>
<span class="sd">                expression(s) or Filter object(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">.</span><span class="n">j_filter</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table where operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.where_in">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.where_in">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The where_in method creates a new table containing rows from the source table, where the rows match</span>
<span class="sd">        values in the filter table. The filter is updated whenever either table changes.</span>

<span class="sd">        Args:</span>
<span class="sd">            filter_table (Table): the table containing the set of values to filter on</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">whereIn</span><span class="p">(</span><span class="n">filter_table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table where_in operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.where_not_in">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.where_not_in">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where_not_in</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The where_not_in method creates a new table containing rows from the source table, where the rows do not</span>
<span class="sd">        match values in the filter table.</span>

<span class="sd">        Args:</span>
<span class="sd">            filter_table (Table): the table containing the set of values to filter on</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                    <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">whereNotIn</span><span class="p">(</span><span class="n">filter_table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="o">*</span><span class="n">cols</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table where_not_in operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.where_one_of">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.where_one_of">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where_one_of</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The where_one_of method creates a new table containing rows from the source table, where the rows match at</span>
<span class="sd">        least one filter.</span>

<span class="sd">        Args:</span>
<span class="sd">            filters (Optional[Union[str, Filter, Sequence[str], Sequence[Filter]]]): the filter condition expression(</span>
<span class="sd">            s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">or_</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">.</span><span class="n">j_filter</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table where_one_of operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.head">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.head">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The head method creates a new table with a specific number of rows from the beginning of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the head of table</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">num_rows</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table head operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.head_pct">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.head_pct">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">head_pct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pct</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The head_pct method creates a new table with a specific percentage of rows from the beginning of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            pct (float): the percentage of rows to return as a value from 0 (0%) to 1 (100%).</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">headPct</span><span class="p">(</span><span class="n">pct</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table head_pct operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.tail">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.tail">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">tail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The tail method creates a new table with a specific number of rows from the end of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the end of table</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="n">num_rows</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table tail operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.tail_pct">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.tail_pct">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">tail_pct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pct</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The tail_pct method creates a new table with a specific percentage of rows from the end of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            pct (float): the percentage of rows to return as a value from 0 (0%) to 1 (100%).</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">tailPct</span><span class="p">(</span><span class="n">pct</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table tail_pct operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="c1"># endregion</span>

    <span class="c1">#</span>
    <span class="c1"># Table operation category: Sort</span>
    <span class="c1">#</span>
    <span class="c1"># region Sort</span>
<div class="viewcode-block" id="Table.restrict_sort_to">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.restrict_sort_to">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">restrict_sort_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The restrict_sort_to method adjusts the input table to produce an output table that only allows sorting on</span>
<span class="sd">        specified table columns. This can be useful to prevent users from accidentally performing expensive sort</span>
<span class="sd">        operations as they interact with tables in the UI.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">restrictSortTo</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table restrict_sort_to operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.sort_descending">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.sort_descending">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort_descending</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The sort_descending method creates a new table where rows in a table are sorted in descending order based on</span>
<span class="sd">        the order_by column(s).</span>

<span class="sd">        Args:</span>
<span class="sd">            order_by (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">order_by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">sortDescending</span><span class="p">(</span><span class="o">*</span><span class="n">order_by</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table sort_descending operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.reverse">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.reverse">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The reverse method creates a new table with all of the rows from this table in reverse order.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">reverse</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table reverse operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.sort">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.sort">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SortDirection</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SortDirection</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The sort method creates a new table where the rows are ordered based on values in a specified set of columns.</span>

<span class="sd">        Args:</span>
<span class="sd">            order_by (Union[str, Sequence[str]]): the column(s) to be sorted on</span>
<span class="sd">            order (Optional[Union[SortDirection, Sequence[SortDirection]]): the corresponding sort directions for</span>
<span class="sd">                each sort column, default is None, meaning ascending order for all the sort columns.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">order_by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="p">:</span>
                <span class="n">order</span> <span class="o">=</span> <span class="p">(</span><span class="n">SortDirection</span><span class="o">.</span><span class="n">ASCENDING</span><span class="p">,)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">order</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">o</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">SortDirection</span><span class="o">.</span><span class="n">ASCENDING</span><span class="p">,</span> <span class="n">SortDirection</span><span class="o">.</span><span class="n">DESCENDING</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">order</span>
                    <span class="p">]</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The sort direction must be either &#39;ASCENDING&#39; or &#39;DESCENDING&#39;.&quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The number of sort columns must be the same as the number of sort directions.&quot;</span>
                    <span class="p">)</span>

            <span class="n">sort_columns</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_sort_column</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">dir_</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">dir_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">order_by</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">j_sc_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span><span class="n">sort_columns</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">j_sc_list</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table sort operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="c1"># endregion</span>

    <span class="c1">#</span>
    <span class="c1"># Table operation category: Join</span>
    <span class="c1">#</span>
    <span class="c1"># region Join</span>

<div class="viewcode-block" id="Table.natural_join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.natural_join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">natural_join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">NaturalJoinType</span> <span class="o">=</span> <span class="n">NaturalJoinType</span><span class="o">.</span><span class="n">ERROR_ON_DUPLICATE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The natural_join method creates a new table containing all the rows and columns of this table,</span>
<span class="sd">        plus additional columns containing data from the right table. For columns appended to the left table (joins),</span>
<span class="sd">        row values equal the row values from the right table where the key values in the left and right tables are</span>
<span class="sd">        equal. If there is no matching key in the right table, appended row values are NULL.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right-table of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or an equal expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>
<span class="sd">            joinType (NaturalJoinType): the action to be taken when duplicate right hand rows are</span>
<span class="sd">                encountered; default is ERROR_ON_DUPLICATE</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">joins</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                        <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">naturalJoin</span><span class="p">(</span>
                            <span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joins</span><span class="p">),</span> <span class="nb">type</span><span class="o">.</span><span class="n">value</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                        <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">naturalJoin</span><span class="p">(</span>
                            <span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="nb">type</span><span class="o">.</span><span class="n">value</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table natural_join operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.exact_join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.exact_join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">exact_join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The exact_join method creates a new table containing all the rows and columns of this table plus</span>
<span class="sd">        additional columns containing data from the right table. For columns appended to the left table (joins),</span>
<span class="sd">        row values equal the row values from the right table where the key values in the left and right tables are</span>
<span class="sd">        equal.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right-table of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or an equal expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">joins</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                        <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">exactJoin</span><span class="p">(</span>
                            <span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                        <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">exactJoin</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table exact_join operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The join method creates a new table containing rows that have matching values in both tables. Rows that</span>
<span class="sd">        do not have matching criteria will not be included in the result. If there are multiple matches between a row</span>
<span class="sd">        from the left table and rows from the right table, all matching combinations will be included. If no columns</span>
<span class="sd">        to match (on) are specified, every combination of left and right table rows is included.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right-table of the join</span>
<span class="sd">            on (Optional[Union[str, Sequence[str]]]): the column(s) to match, can be a common name or an equal</span>
<span class="sd">            expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names; default is None</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">joins</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                        <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                            <span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table join operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.aj">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.aj">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">aj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The aj (as-of join) method creates a new table containing all the rows and columns of the left table,</span>
<span class="sd">        plus additional columns containing data from the right table. For columns appended to the left table (joins),</span>
<span class="sd">        row values equal the row values from the right table where the keys from the left table most closely match</span>
<span class="sd">        the keys from the right table without going over. If there is no matching key in the right table, appended row</span>
<span class="sd">        values are NULL.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right-table of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or a match condition of two</span>
<span class="sd">                columns, e.g. &#39;col_a = col_b&#39;. The first &#39;N-1&#39; matches are exact matches.  The final match is an inexact</span>
<span class="sd">                match.  The inexact match can use either &#39;&gt;&#39; or &#39;&gt;=&#39;.  If a common name is used for the inexact match,</span>
<span class="sd">                &#39;&gt;=&#39; is used for the comparison.</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>
<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">))</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="n">table_op</span><span class="o">.</span><span class="n">aj</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">joins</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table as-of join operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.raj">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.raj">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">raj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The reverse-as-of join method creates a new table containing all the rows and columns of the left table,</span>
<span class="sd">        plus additional columns containing data from the right table. For columns appended to the left table (joins),</span>
<span class="sd">        row values equal the row values from the right table where the keys from the left table most closely match</span>
<span class="sd">        the keys from the right table without going under. If there is no matching key in the right table, appended row</span>
<span class="sd">        values are NULL.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right-table of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or a match condition of two</span>
<span class="sd">                columns, e.g. &#39;col_a = col_b&#39;. The first &#39;N-1&#39; matches are exact matches.  The final match is an inexact</span>
<span class="sd">                match.  The inexact match can use either &#39;&lt;&#39; or &#39;&lt;=&#39;.  If a common name is used for the inexact match,</span>
<span class="sd">                &#39;&lt;=&#39; is used for the comparison.</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">))</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="n">table_op</span><span class="o">.</span><span class="n">raj</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">joins</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table reverse-as-of join operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.range_join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.range_join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">range_join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">aggs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The range_join method creates a new table containing all the rows and columns of the left table,</span>
<span class="sd">        plus additional columns containing aggregated data from the right table. For columns appended to the</span>
<span class="sd">        left table (joins), cell values equal aggregations over vectors of values from the right table.</span>
<span class="sd">        These vectors are formed from all values in the right table where the right table keys fall within the</span>
<span class="sd">        ranges of keys defined by the left table (responsive ranges).</span>

<span class="sd">        range_join is a join plus aggregation that (1) joins arrays of data from the right table onto the left table,</span>
<span class="sd">        and then (2) aggregates over the joined data. Oftentimes this is used to join data for a particular time range</span>
<span class="sd">        from the right table onto the left table.</span>

<span class="sd">        Rows from the right table with null or NaN key values are discarded; that is, they are never included in the</span>
<span class="sd">        vectors used for aggregation.  For all rows that are not discarded, the right table must be sorted according</span>
<span class="sd">        to the right range column for all rows within a group.</span>

<span class="sd">        Join key ranges, specified by the &#39;on&#39; argument, are defined by zero-or-more exact join matches and a single</span>
<span class="sd">        range join match. The range join match must be the last match in the list.</span>

<span class="sd">        The exact match expressions are parsed as in other join operations. That is, they are either a column name</span>
<span class="sd">        common to both tables or a column name from the left table followed by an equals sign followed by a column</span>
<span class="sd">        name from the right table.</span>
<span class="sd">        Examples:</span>
<span class="sd">            Match on the same column name in both tables:</span>
<span class="sd">                &quot;common_column&quot;</span>
<span class="sd">            Match on different column names in each table:</span>
<span class="sd">                &quot;left_column = right_column&quot;</span>
<span class="sd">                or</span>
<span class="sd">                &quot;left_column == right_column&quot;</span>

<span class="sd">        The range match expression is expressed as a ternary logical expression, expressing the relationship between</span>
<span class="sd">        the left start column, the right range column, and the left end column. Each column name pair is separated by</span>
<span class="sd">        a logical operator, either &lt; or &lt;=. Additionally, the entire expression may be preceded by a left arrow &lt;-</span>
<span class="sd">        and/or followed by a right arrow -&gt;.  The arrows indicate that range match can &#39;allow preceding&#39; or &#39;allow</span>
<span class="sd">        following&#39; to match values outside the explicit range. &#39;Allow preceding&#39; means that if no matching right</span>
<span class="sd">        range column value is equal to the left start column value, the immediately preceding matching right row</span>
<span class="sd">        should be included in the aggregation if such a row exists. &#39;Allow following&#39; means that if no matching right</span>
<span class="sd">        range column value is equal to the left end column value, the immediately following matching right row should</span>
<span class="sd">        be included in the aggregation if such a row exists.</span>
<span class="sd">        Examples:</span>
<span class="sd">            For less than paired with greater than:</span>
<span class="sd">               &quot;left_start_column &lt; right_range_column &lt; left_end_column&quot;</span>
<span class="sd">            For less than or equal paired with greater than or equal:</span>
<span class="sd">               &quot;left_start_column &lt;= right_range_column &lt;= left_end_column&quot;</span>
<span class="sd">            For less than or equal (allow preceding) paired with greater than or equal (allow following):</span>
<span class="sd">               &quot;&lt;- left_start_column &lt;= right_range_column &lt;= left_end_column -&gt;&quot;</span>

<span class="sd">        Special Cases</span>
<span class="sd">            In order to produce aggregated output, range match expressions must define a range of values to aggregate</span>
<span class="sd">            over. There are a few noteworthy special cases of ranges.</span>

<span class="sd">            Empty Range</span>
<span class="sd">            An empty range occurs for any left row with no matching right rows. That is, no non-null, non-NaN right</span>
<span class="sd">            rows were found using the exact join matches, or none were in range according to the range join match.</span>

<span class="sd">            Single-value Ranges</span>
<span class="sd">            A single-value range is a range where the left row&#39;s values for the left start column and left end</span>
<span class="sd">            column are equal and both relative matches are inclusive (&lt;= and &gt;=, respectively). For a single-value</span>
<span class="sd">            range, only rows within the bucket where the right range column matches the single value are included in</span>
<span class="sd">            the output aggregations.</span>

<span class="sd">            Invalid Ranges</span>
<span class="sd">            An invalid range occurs in two scenarios:</span>
<span class="sd">                (1) When the range is inverted, i.e., when the value of the left start column is greater than the value</span>
<span class="sd">                    of the left end column.</span>
<span class="sd">                (2) When either relative-match is exclusive (&lt; or &gt;) and the value in the left start column is equal to</span>
<span class="sd">                    the value in the left end column.</span>
<span class="sd">            For invalid ranges, the result row will be null for all aggregation output columns.</span>

<span class="sd">            Undefined Ranges</span>
<span class="sd">            An undefined range occurs when either the left start column or the left end column is NaN. For rows with an</span>
<span class="sd">            undefined range, the corresponding output values will be null (as with invalid ranges).</span>

<span class="sd">            Unbounded Ranges</span>
<span class="sd">            A partially or fully unbounded range occurs when either the left start column or the left end column is</span>
<span class="sd">            null. If the left start column value is null and the left end column value is non-null, the range is</span>
<span class="sd">            unbounded at the beginning, and only the left end column subexpression will be used for the match. If the</span>
<span class="sd">            left start column value is non-null and the left end column value is null, the range is unbounded at the</span>
<span class="sd">            end, and only the left start column subexpression will be used for the match. If the left start column</span>
<span class="sd">            and left end column values are null, the range is unbounded, and all rows will be included.</span>

<span class="sd">        Note: At this time, implementations only support static tables. This operation remains under active development.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right table of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the match expression(s) that must include zero-or-more exact match</span>
<span class="sd">            expression,</span>
<span class="sd">                and exactly one range match expression as described above</span>
<span class="sd">            aggs (Union[Aggregation, Sequence[Aggregation]]): the aggregation(s) to perform over the</span>
<span class="sd">            responsive ranges from</span>
<span class="sd">                the right table for each row from this Table</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">aggs</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="n">j_agg_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">j_aggregation</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">rangeJoin</span><span class="p">(</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">j_array_list</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="n">j_agg_list</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;table range_join operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="c1"># endregion</span>

    <span class="c1">#</span>
    <span class="c1"># Table operation category: Aggregation</span>
    <span class="c1"># region Aggregation</span>

<div class="viewcode-block" id="Table.head_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.head_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">head_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The head_by method creates a new table containing the first number of rows for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the beginning of each group</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">headBy</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table head_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.tail_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.tail_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">tail_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The tail_by method creates a new table containing the last number of rows for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the end of each group</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">tailBy</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table tail_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.group_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.group_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">group_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The group_by method creates a new table containing grouping columns and grouped data, column content is</span>
<span class="sd">        grouped into vectors.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">groupBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">groupBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table group-by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.ungroup">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.ungroup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">ungroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The ungroup method creates a new table in which array columns from the source table are unwrapped into</span>
<span class="sd">        separate rows.</span>

<span class="sd">        Args:</span>
<span class="sd">            cols (Optional[Union[str, Sequence[str]]]): the name(s) of the array column(s), if None, all array columns</span>
<span class="sd">                will be ungrouped, default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">cols</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">ungroup</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">ungroup</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table ungroup operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.first_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.first_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">first_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The first_by method creates a new table containing the first row for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">firstBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">firstBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table first_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.last_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.last_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">last_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The last_by method creates a new table containing the last row for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">lastBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">lastBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table last_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.sum_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.sum_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sum_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The sum_by method creates a new table containing the sum for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">sumBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">sumBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table sum_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.abs_sum_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.abs_sum_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">abs_sum_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The abs_sum_by method creates a new table containing the absolute sum for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">absSumBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">absSumBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table asb_sum_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.weighted_sum_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.weighted_sum_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_sum_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wcol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The weighted_sum_by method creates a new table containing the weighted sum for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            wcol (str): the name of the weight column</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">wsumBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">wsumBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table weighted_sum_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.avg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.avg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">avg_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The avg_by method creates a new table containing the average for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">avgBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">avgBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table avg_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.weighted_avg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.weighted_avg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_avg_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wcol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The weighted_avg_by method creates a new table containing the weighted average for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            wcol (str): the name of the weight column</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">wavgBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">wavgBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table avg_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.std_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.std_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">std_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The std_by method creates a new table containing the sample standard deviation for each group.</span>

<span class="sd">        Sample standard deviation is computed using `Bessel&#39;s correction</span>
<span class="sd">        &lt;https://en.wikipedia.org/wiki/Bessel%27s_correction&gt;`_,</span>
<span class="sd">        which ensures that the sample variance will be an unbiased estimator of population variance.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">stdBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">stdBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table std_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.var_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.var_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">var_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The var_by method creates a new table containing the sample variance for each group.</span>

<span class="sd">        Sample variance is computed using `Bessel&#39;s correction &lt;https://en.wikipedia.org/wiki/Bessel%27s_correction&gt;`_,</span>
<span class="sd">        which ensures that the sample variance will be an unbiased estimator of population variance.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">varBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">varBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table var_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.median_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.median_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">median_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The median_by method creates a new table containing the median for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">medianBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">medianBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table median_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.min_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.min_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">min_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The min_by method creates a new table containing the minimum value for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">minBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">minBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table min_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.max_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.max_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">max_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The max_by method creates a new table containing the maximum value for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">maxBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">maxBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table max_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.count_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.count_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">count_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The count_by method creates a new table containing the number of rows for each group.</span>

<span class="sd">        Args:</span>
<span class="sd">            col (str): the name of the column to store the counts</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">countBy</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">countBy</span><span class="p">(</span><span class="n">col</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table count_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.agg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.agg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">agg_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aggs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">]],</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">preserve_empty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">initial_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The agg_by method creates a new table containing grouping columns and grouped data. The resulting</span>
<span class="sd">        grouped data is defined by the aggregations specified.</span>

<span class="sd">        Args:</span>
<span class="sd">            aggs (Union[Aggregation, Sequence[Aggregation]]): the aggregation(s)</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), if not provided, all rows from</span>
<span class="sd">            this table are</span>
<span class="sd">                grouped into a single group of rows before the aggregations are applied to the result, default is None.</span>
<span class="sd">            preserve_empty (bool): whether to keep result rows for groups that are initially empty or become empty as</span>
<span class="sd">                a result of updates. Each aggregation operator defines its own value for empty groups. Default is False.</span>
<span class="sd">            initial_groups (Optional[Table]): a table whose distinct combinations of values for the group-by column(s)</span>
<span class="sd">                should be used to create an initial set of aggregation groups. All other columns are ignored. This is</span>
<span class="sd">                useful in combination with preserve_empty=True to ensure that particular groups appear in the result</span>
<span class="sd">                table, or with preserve_empty=False to control the encounter order for a collection of groups and</span>
<span class="sd">                thus their relative order in the result. Changes to this table are not expected or handled; if this</span>
<span class="sd">                table is a refreshing table, only its contents at instantiation time will be used. Default is None,</span>
<span class="sd">                the result will be the same as if a table is provided but no rows were supplied. When it is provided,</span>
<span class="sd">                the &#39;by&#39; argument must be provided to explicitly specify the grouping columns.</span>
<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">aggs</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">by</span> <span class="ow">and</span> <span class="n">initial_groups</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;missing group-by column names when initial_groups is provided.&quot;</span>
                <span class="p">)</span>
            <span class="n">j_agg_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">j_aggregation</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>

            <span class="n">cm</span> <span class="o">=</span> <span class="n">_query_scope_agg_ctx</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">cm</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">aggBy</span><span class="p">(</span><span class="n">j_agg_list</span><span class="p">,</span> <span class="n">preserve_empty</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">j_column_name_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">_JColumnName</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">by</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">initial_groups</span> <span class="o">=</span> <span class="n">unwrap</span><span class="p">(</span><span class="n">initial_groups</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                        <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">aggBy</span><span class="p">(</span>
                            <span class="n">j_agg_list</span><span class="p">,</span>
                            <span class="n">preserve_empty</span><span class="p">,</span>
                            <span class="n">initial_groups</span><span class="p">,</span>
                            <span class="n">j_column_name_list</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table agg_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.partitioned_agg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.partitioned_agg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">partitioned_agg_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aggs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">]],</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">preserve_empty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">initial_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The partitioned_agg_by method is a convenience method that performs an agg_by operation on this table and</span>
<span class="sd">        wraps the result in a PartitionedTable. If the argument &#39;aggs&#39; does not include a partition aggregation</span>
<span class="sd">        created by calling :py:func:`agg.partition`, one will be added automatically with the default constituent column</span>
<span class="sd">        name __CONSTITUENT__.</span>

<span class="sd">        Args:</span>
<span class="sd">            aggs (Union[Aggregation, Sequence[Aggregation]]): the aggregation(s)</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>
<span class="sd">            preserve_empty (bool): whether to keep result rows for groups that are initially empty or become empty as</span>
<span class="sd">                a result of updates. Each aggregation operator defines its own value for empty groups. Default is False.</span>
<span class="sd">            initial_groups (Optional[Table]): a table whose distinct combinations of values for the group-by column(s)</span>
<span class="sd">                should be used to create an initial set of aggregation groups. All other columns are ignored. This is</span>
<span class="sd">                useful in combination with preserve_empty=True to ensure that particular groups appear in the result</span>
<span class="sd">                table, or with preserve_empty=False to control the encounter order for a collection of groups and</span>
<span class="sd">                thus their relative order in the result. Changes to this table are not expected or handled; if this</span>
<span class="sd">                table is a refreshing table, only its contents at instantiation time will be used. Default is None,</span>
<span class="sd">                the result will be the same as if a table is provided but no rows were supplied. When it is provided,</span>
<span class="sd">                the &#39;by&#39; argument must be provided to explicitly specify the grouping columns.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a PartitionedTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">aggs</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="n">j_agg_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">j_aggregation</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>
            <span class="n">initial_groups</span> <span class="o">=</span> <span class="n">unwrap</span><span class="p">(</span><span class="n">initial_groups</span><span class="p">)</span>

            <span class="n">cm</span> <span class="o">=</span> <span class="n">_query_scope_agg_ctx</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">cm</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                    <span class="n">j_partitioned_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">partitionedAggBy</span><span class="p">(</span>
                        <span class="n">j_agg_list</span><span class="p">,</span> <span class="n">preserve_empty</span><span class="p">,</span> <span class="n">initial_groups</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table partitioned_agg_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.agg_all_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.agg_all_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">agg_all_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">agg</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The agg_all_by method creates a new table containing grouping columns and grouped data. The resulting</span>
<span class="sd">        grouped data is defined by the aggregation specified.</span>

<span class="sd">        Note, because agg_all_by applies the aggregation to all the columns of the table, it will ignore</span>
<span class="sd">        any column names specified for the aggregation.</span>

<span class="sd">        Args:</span>
<span class="sd">            agg (Aggregation): the aggregation</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="n">cm</span> <span class="o">=</span> <span class="n">_query_scope_agg_ctx</span><span class="p">([</span><span class="n">agg</span><span class="p">])</span>
            <span class="k">with</span> <span class="n">cm</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">aggAllBy</span><span class="p">(</span><span class="n">agg</span><span class="o">.</span><span class="n">j_agg_spec</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table agg_all_by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="c1"># endregion</span>

<div class="viewcode-block" id="Table.format_columns">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.format_columns">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">format_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies color formatting to the columns of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): formatting string(s) in the form of &quot;column=color_expression&quot;</span>
<span class="sd">                where color_expression can be a color name or a Java ternary expression that results in a color.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">formatColumns</span><span class="p">(</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to color format columns.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.format_column_where">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.format_column_where">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">format_column_where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cond</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies color formatting to a column of the table conditionally.</span>

<span class="sd">        Args:</span>
<span class="sd">            col (str): the column name</span>
<span class="sd">            cond (str): the condition expression</span>
<span class="sd">            formula (str): the formatting string in the form of assignment expression &quot;column=color expression&quot;</span>
<span class="sd">                where color_expression can be a color name or a Java ternary expression that results in a color.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">formatColumnWhere</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">cond</span><span class="p">,</span> <span class="n">formula</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to color format column conditionally.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.format_row_where">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.format_row_where">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">format_row_where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cond</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">formula</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies color formatting to rows of the table conditionally.</span>

<span class="sd">        Args:</span>
<span class="sd">            cond (str): the condition expression</span>
<span class="sd">            formula (str): the formatting string in the form of assignment expression &quot;column=color expression&quot;</span>
<span class="sd">                where color_expression can be a color name or a Java ternary expression that results in a color.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">formatRowWhere</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span> <span class="n">formula</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to color format rows conditionally.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.layout_hints">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.layout_hints">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">layout_hints</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">front</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">back</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">freeze</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">hide</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">column_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">search_display_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SearchDisplayMode</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets layout hints on the Table</span>

<span class="sd">        Args:</span>
<span class="sd">            front (Optional[Union[str, Sequence[str]]]): the columns to show at the front.</span>
<span class="sd">            back (Optional[Union[str, Sequence[str]]]): the columns to show at the back.</span>
<span class="sd">            freeze (Optional[Union[str, Sequence[str]]]): the columns to freeze to the front.</span>
<span class="sd">                These will not be affected by horizontal scrolling.</span>
<span class="sd">            hide (Optional[Union[str, Sequence[str]]]): the columns to hide.</span>
<span class="sd">            column_groups (Optional[Sequence[dict]]): A sequence of dicts specifying which columns should be grouped in</span>
<span class="sd">            the UI.</span>
<span class="sd">                The dicts can specify the following:</span>

<span class="sd">                * name (str): The group name</span>
<span class="sd">                * children (Sequence[str]): The column names in the group</span>
<span class="sd">                * color (Optional[str]): The hex color string or Deephaven color name</span>
<span class="sd">            search_display_mode (Optional[SearchDisplayMode]): set the search bar to explicitly be accessible or</span>
<span class="sd">            inaccessible,</span>
<span class="sd">                or use the system default. :attr:`SearchDisplayMode.SHOW` will show the search bar,</span>
<span class="sd">                :attr:`SearchDisplayMode.HIDE` will hide the search bar, and :attr:`SearchDisplayMode.DEFAULT` will</span>
<span class="sd">                use the default value configured by the user and system settings.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table with the layout hints set</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_j_layout_hint_builder</span> <span class="o">=</span> <span class="n">_JLayoutHintBuilder</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">front</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">atFront</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">front</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">back</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">atBack</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">back</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">freeze</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">freeze</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">freeze</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">hide</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">hide</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">hide</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">column_groups</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">column_groups</span><span class="p">:</span>
                    <span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">columnGroup</span><span class="p">(</span>
                        <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">),</span>
                        <span class="n">j_array_list</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">)),</span>
                        <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                    <span class="p">)</span>

            <span class="k">if</span> <span class="n">search_display_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">setSearchBarAccess</span><span class="p">(</span><span class="n">search_display_mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create layout hints&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                <span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">setLayoutHints</span><span class="p">(</span><span class="n">_j_layout_hint_builder</span><span class="o">.</span><span class="n">build</span><span class="p">())</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to set layout hints on table&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.partition_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.partition_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">partition_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">drop_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a PartitionedTable from this table, partitioned according to the specified key columns.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Union[str, Sequence[str]]): the column(s) by which to group data</span>
<span class="sd">            drop_keys (bool): whether to drop key columns in the constituent tables, default is False</span>

<span class="sd">        Returns:</span>
<span class="sd">            A PartitionedTable containing a sub-table for each group</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">drop_keys</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s2">&quot;drop_keys must be a boolean value.&quot;</span><span class="p">)</span>

            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                <span class="n">j_partitioned_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">partitionBy</span><span class="p">(</span><span class="n">drop_keys</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create a partitioned table.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.update_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.update_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ops</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">UpdateByOperation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">UpdateByOperation</span><span class="p">]],</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a table with additional columns calculated from window-based aggregations of columns in this table.</span>
<span class="sd">        The aggregations are defined by the provided operations, which support incremental aggregations over the</span>
<span class="sd">        corresponding rows in the table. The aggregations will apply position or time-based windowing and</span>
<span class="sd">        compute the results over the entire table or each row group as identified by the provided key columns.</span>

<span class="sd">        Args:</span>
<span class="sd">            ops (Union[UpdateByOperation, Sequence[UpdateByOperation]]): the update-by operation definition(s)</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the key column name(s) to group the rows of the table</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new Table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ops</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">updateBy</span><span class="p">(</span><span class="n">j_array_list</span><span class="p">(</span><span class="n">ops</span><span class="p">),</span> <span class="o">*</span><span class="n">by</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table update-by operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.slice">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.slice">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stop</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extracts a subset of a table by row positions into a new Table.</span>

<span class="sd">        If both the start and the stop are positive, then both are counted from the beginning of the table.</span>
<span class="sd">        The start is inclusive, and the stop is exclusive. slice(0, N) is equivalent to :meth:`~Table.head` (N)</span>
<span class="sd">        The start must be less than or equal to the stop.</span>

<span class="sd">        If the start is positive and the stop is negative, then the start is counted from the beginning of the</span>
<span class="sd">        table, inclusively. The stop is counted from the end of the table. For example, slice(1, -1) includes all</span>
<span class="sd">        rows but the first and last. If the stop is before the start, the result is an empty table.</span>

<span class="sd">        If the start is negative, and the stop is zero, then the start is counted from the end of the table,</span>
<span class="sd">        and the end of the slice is the size of the table. slice(-N, 0) is equivalent to :meth:`~Table.tail` (N).</span>

<span class="sd">        If the start is negative and the stop is negative, they are both counted from the end of the</span>
<span class="sd">        table. For example, slice(-2, -1) returns the second to last row of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            start (int): the first row position to include in the result</span>
<span class="sd">            stop (int): the last row position to include in the result</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new Table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; table.slice(0, 5)    # first 5 rows</span>
<span class="sd">            &gt;&gt;&gt; table.slice(-5, 0)   # last 5 rows</span>
<span class="sd">            &gt;&gt;&gt; table.slice(2, 6)    # rows from index 2 to 5</span>
<span class="sd">            &gt;&gt;&gt; table.slice(6, 2)    # ERROR: cannot slice start after end</span>
<span class="sd">            &gt;&gt;&gt; table.slice(-6, -2)  # rows from 6th last to 2nd last (exclusive)</span>
<span class="sd">            &gt;&gt;&gt; table.slice(-2, -6)  # ERROR: cannot slice start after end</span>
<span class="sd">            &gt;&gt;&gt; table.slice(2, -3)   # all rows except the first 2 and the last 3</span>
<span class="sd">            &gt;&gt;&gt; table.slice(-6, 8)   # rows from 6th last to index 8 (exclusive)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table slice operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.slice_pct">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.slice_pct">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">slice_pct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_pct</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">end_pct</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extracts a subset of a table by row percentages.</span>

<span class="sd">        Returns a subset of table in the range [floor(start_pct * size_of_table), floor(end_pct * size_of_table)).</span>
<span class="sd">        For example, for a table of size 10, slice_pct(0.1, 0.7) will return a subset from the second row to the seventh</span>
<span class="sd">        row. Similarly, slice_pct(0, 1) would return the entire table (because row positions run from 0 to size - 1).</span>
<span class="sd">        The percentage arguments must be in range [0, 1], otherwise the function returns an error.</span>

<span class="sd">        Args:</span>
<span class="sd">            start_pct (float): the starting percentage point (inclusive) for rows to include in the result, range [0, 1]</span>
<span class="sd">            end_pct (float): the ending percentage point (exclusive) for rows to include in the result, range [0, 1]</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">slicePct</span><span class="p">(</span><span class="n">start_pct</span><span class="p">,</span> <span class="n">end_pct</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table slice_pct operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.rollup">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.rollup">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rollup</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aggs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">]],</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_constituents</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RollupTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a rollup table.</span>

<span class="sd">        A rollup table aggregates by the specified columns, and then creates a hierarchical table which re-aggregates</span>
<span class="sd">        using one less by column on each level. The column that is no longer part of the aggregation key is</span>
<span class="sd">        replaced with null on each level.</span>

<span class="sd">        Note some aggregations can not be used in creating a rollup tables, these include: group, partition, median,</span>
<span class="sd">        pct, weighted_avg</span>

<span class="sd">        Args:</span>
<span class="sd">            aggs (Union[Aggregation, Sequence[Aggregation]]): the aggregation(s)</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>
<span class="sd">            include_constituents (bool): whether to include the constituent rows at the leaf level, default is False</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new RollupTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">aggs</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="n">j_agg_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">j_aggregation</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>

            <span class="n">cm</span> <span class="o">=</span> <span class="n">_query_scope_agg_ctx</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">cm</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">RollupTable</span><span class="p">(</span>
                        <span class="n">j_rollup_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">rollup</span><span class="p">(</span>
                            <span class="n">j_agg_list</span><span class="p">,</span> <span class="n">include_constituents</span>
                        <span class="p">),</span>
                        <span class="n">aggs</span><span class="o">=</span><span class="n">aggs</span><span class="p">,</span>
                        <span class="n">include_constituents</span><span class="o">=</span><span class="n">include_constituents</span><span class="p">,</span>
                        <span class="n">by</span><span class="o">=</span><span class="n">by</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">RollupTable</span><span class="p">(</span>
                        <span class="n">j_rollup_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">rollup</span><span class="p">(</span>
                            <span class="n">j_agg_list</span><span class="p">,</span> <span class="n">include_constituents</span><span class="p">,</span> <span class="n">by</span>
                        <span class="p">),</span>
                        <span class="n">aggs</span><span class="o">=</span><span class="n">aggs</span><span class="p">,</span>
                        <span class="n">include_constituents</span><span class="o">=</span><span class="n">include_constituents</span><span class="p">,</span>
                        <span class="n">by</span><span class="o">=</span><span class="n">by</span><span class="p">,</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table rollup operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.tree">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.tree">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">tree</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">id_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parent_col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">promote_orphans</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TreeTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a hierarchical tree table.</span>

<span class="sd">        The structure of the table is encoded by an &quot;id&quot; and a &quot;parent&quot; column. The id column should represent a unique</span>
<span class="sd">        identifier for a given row, and the parent column indicates which row is the parent for a given row. Rows that</span>
<span class="sd">        have a None parent are part of the &quot;root&quot; table.</span>

<span class="sd">        It is possible for rows to be &quot;orphaned&quot; if their parent is non-None and does not exist in the table. These</span>
<span class="sd">        rows will not be present in the resulting tree. If this is not desirable, they could be promoted to become</span>
<span class="sd">        children of the root table by setting &#39;promote_orphans&#39; argument to True.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_col (str): the name of a column containing a unique identifier for a particular row in the table</span>
<span class="sd">            parent_col (str): the name of a column containing the parent&#39;s identifier, {@code null} for rows that are</span>
<span class="sd">                part of the root table</span>
<span class="sd">            promote_orphans (bool): whether to promote node tables whose parents don&#39;t exist to be children of the</span>
<span class="sd">                root node, default is False</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new TreeTable organized according to the parent-child relationships expressed by id_col and parent_col</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">promote_orphans</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                    <span class="n">j_table</span> <span class="o">=</span> <span class="n">_JTreeTable</span><span class="o">.</span><span class="n">promoteOrphans</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">id_col</span><span class="p">,</span> <span class="n">parent_col</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">j_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span>

            <span class="k">return</span> <span class="n">TreeTable</span><span class="p">(</span>
                <span class="n">j_tree_table</span><span class="o">=</span><span class="n">j_table</span><span class="o">.</span><span class="n">tree</span><span class="p">(</span><span class="n">id_col</span><span class="p">,</span> <span class="n">parent_col</span><span class="p">),</span>
                <span class="n">id_col</span><span class="o">=</span><span class="n">id_col</span><span class="p">,</span>
                <span class="n">parent_col</span><span class="o">=</span><span class="n">parent_col</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table tree operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="Table.await_update">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.Table.await_update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">await_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Waits until either this refreshing Table is updated or the timeout elapses if provided.</span>

<span class="sd">        Args:</span>
<span class="sd">            timeout (Optional[int]): the maximum time to wait in milliseconds, default is None, meaning no timeout</span>

<span class="sd">        Returns:</span>
<span class="sd">            True when the table is updated or False when the timeout has been reached.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_refreshing</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;await_update can only be called on refreshing tables.&quot;</span>
            <span class="p">)</span>

        <span class="n">updated</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">awaitUpdate</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">j_table</span><span class="o">.</span><span class="n">awaitUpdate</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;await_update was interrupted.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">updated</span></div>
</div>



<div class="viewcode-block" id="PartitionedTable">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PartitionedTable</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A partitioned table is a table containing tables, known as constituent tables.</span>
<span class="sd">    Each constituent table has the same schema.</span>

<span class="sd">    The partitioned table contains:</span>
<span class="sd">    1. one column containing constituent tables</span>
<span class="sd">    2. key columns (optional)</span>
<span class="sd">    3. non-key columns (optional)</span>

<span class="sd">    Key values can be used to retrieve constituent tables from the partitioned table and</span>
<span class="sd">    can be used to perform operations with other like-keyed partitioned tables.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JPartitionedTable</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_partitioned_table</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span> <span class="o">=</span> <span class="n">j_partitioned_table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_definition</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_table</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="PartitionedTable.from_partitioned_table">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.from_partitioned_table">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_partitioned_table</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">key_cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">unique_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">constituent_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">constituent_table_columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TableDefinitionLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">constituent_changes_permitted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a PartitionedTable from the provided underlying partitioned Table.</span>

<span class="sd">        Note: key_cols, unique_keys, constituent_column, constituent_table_definition,</span>
<span class="sd">        constituent_changes_permitted must either be all None or all have values. When they are None, their values will</span>
<span class="sd">        be inferred as follows:</span>

<span class="sd">        |    * key_cols: the names of all columns with a non-Table data type</span>
<span class="sd">        |    * unique_keys: False</span>
<span class="sd">        |    * constituent_column: the name of the first column with a Table data type</span>
<span class="sd">        |    * constituent_table_definition: the table definitions of the first cell (constituent table) in the</span>
<span class="sd">        constituent</span>
<span class="sd">            column. Consequently, the constituent column can&#39;t be empty.</span>
<span class="sd">        |    * constituent_changes_permitted: the value of table.is_refreshing</span>


<span class="sd">        Args:</span>
<span class="sd">            table (Table): the underlying partitioned table</span>
<span class="sd">            key_cols (Optional[Union[str, Sequence[str]]]): the key column name(s) of &#39;table&#39;</span>
<span class="sd">            unique_keys (Optional[bool]): whether the keys in &#39;table&#39; are guaranteed to be unique</span>
<span class="sd">            constituent_column (Optional[str]): the constituent column name in &#39;table&#39;</span>
<span class="sd">            constituent_table_columns (Optional[TableDefinitionLike]): the table definitions of the constituent table</span>
<span class="sd">            constituent_changes_permitted (Optional[bool]): whether the values of the constituent column can change</span>

<span class="sd">        Returns:</span>
<span class="sd">            a PartitionedTable</span>

<span class="sd">        Raise:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">none_args</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">key_cols</span><span class="p">,</span>
            <span class="n">unique_keys</span><span class="p">,</span>
            <span class="n">constituent_column</span><span class="p">,</span>
            <span class="n">constituent_table_columns</span><span class="p">,</span>
            <span class="n">constituent_changes_permitted</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">none_args</span><span class="p">]):</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                    <span class="n">j_partitioned_table</span><span class="o">=</span><span class="n">_JPartitionedTableFactory</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">arg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">none_args</span><span class="p">]):</span>
                <span class="n">table_def</span> <span class="o">=</span> <span class="n">TableDefinition</span><span class="p">(</span>
                    <span class="n">constituent_table_columns</span>
                <span class="p">)</span><span class="o">.</span><span class="n">j_table_definition</span>
                <span class="n">j_partitioned_table</span> <span class="o">=</span> <span class="n">_JPartitionedTableFactory</span><span class="o">.</span><span class="n">of</span><span class="p">(</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span>
                    <span class="n">j_array_list</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">key_cols</span><span class="p">)),</span>
                    <span class="n">unique_keys</span><span class="p">,</span>
                    <span class="n">constituent_column</span><span class="p">,</span>
                    <span class="n">table_def</span><span class="p">,</span>
                    <span class="n">constituent_changes_permitted</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span><span class="n">j_partitioned_table</span><span class="o">=</span><span class="n">j_partitioned_table</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to build a PartitionedTable.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>

        <span class="n">missing_value_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">arg</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">none_args</span> <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">]</span>
        <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;invalid argument values, must specify non-None values for </span><span class="si">{</span><span class="n">missing_value_args</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="PartitionedTable.from_constituent_tables">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.from_constituent_tables">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_constituent_tables</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">tables</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Table</span><span class="p">],</span>
        <span class="n">constituent_table_columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TableDefinitionLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a PartitionedTable with a single column named &#39;__CONSTITUENT__&#39; containing the provided constituent</span>
<span class="sd">        tables.</span>

<span class="sd">        The result PartitionedTable has no key columns, and both its unique_keys and constituent_changes_permitted</span>
<span class="sd">        properties are set to False. When constituent_table_definition isn&#39;t provided, it will be set to the table</span>
<span class="sd">        definitions of the first table in the provided constituent tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            tables (Sequence[Table]): the constituent tables</span>
<span class="sd">            constituent_table_columns (Optional[TableDefinitionLike]): the table definition compatible with all the</span>
<span class="sd">                constituent tables, default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a PartitionedTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">constituent_table_columns</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                    <span class="n">j_partitioned_table</span><span class="o">=</span><span class="n">_JPartitionedTableFactory</span><span class="o">.</span><span class="n">ofTables</span><span class="p">(</span>
                        <span class="n">to_sequence</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">table_def</span> <span class="o">=</span> <span class="n">TableDefinition</span><span class="p">(</span>
                    <span class="n">constituent_table_columns</span>
                <span class="p">)</span><span class="o">.</span><span class="n">j_table_definition</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                    <span class="n">j_partitioned_table</span><span class="o">=</span><span class="n">_JPartitionedTableFactory</span><span class="o">.</span><span class="n">ofTables</span><span class="p">(</span>
                        <span class="n">table_def</span><span class="p">,</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to create a PartitionedTable from constituent tables.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The underlying partitioned table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">table</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateGraph</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The underlying partitioned table&#39;s update graph.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">update_graph</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_refreshing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether the underlying partitioned table is refreshing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">is_refreshing</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">key_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The partition key column names.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">keyColumnNames</span><span class="p">()</span><span class="o">.</span><span class="n">toArray</span><span class="p">())</span>

<div class="viewcode-block" id="PartitionedTable.keys">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.keys">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a Table containing all the keys of the underlying partitioned table.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_keys</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key_columns</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">select_distinct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">key_columns</span><span class="p">)</span></div>


    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unique_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether the keys in the underlying table must always be unique. If keys must be unique, one can expect</span>
<span class="sd">        that self.table.select_distinct(self.key_columns) and self.table.view(self.key_columns) operations always</span>
<span class="sd">        produce equivalent tables.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">uniqueKeys</span><span class="p">()</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">constituent_column</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the column containing constituent tables.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">constituentColumnName</span><span class="p">()</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">constituent_table_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TableDefinition</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The table definitions for constituent tables. All constituent tables in a partitioned table have the</span>
<span class="sd">        same table definitions.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TableDefinition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">constituentDefinition</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">constituent_table_columns</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">ColumnDefinition</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The column definitions for constituent tables. All constituent tables in a partitioned table have the</span>
<span class="sd">        same column definitions.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constituent_table_definition</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">constituent_changes_permitted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Can the constituents of the underlying partitioned table change?  Specifically, can the values of the</span>
<span class="sd">        constituent column change?</span>

<span class="sd">        If constituent changes are not permitted, the underlying partitioned table:</span>
<span class="sd">        1. has no adds</span>
<span class="sd">        2. has no removes</span>
<span class="sd">        3. has no shifts</span>
<span class="sd">        4. has no modifies that include the constituent column</span>

<span class="sd">        Note, it is possible for constituent changes to not be permitted even if constituent tables are refreshing or</span>
<span class="sd">        if the underlying partitioned table is refreshing. Also note that the underlying partitioned table must be</span>
<span class="sd">        refreshing if it contains any refreshing constituents.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">constituentChangesPermitted</span><span class="p">()</span>

<div class="viewcode-block" id="PartitionedTable.merge">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.merge">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Makes a new Table that contains all the rows from all the constituent tables. In the merged result,</span>
<span class="sd">        data from a constituent table is contiguous, and data from constituent tables appears in the same order the</span>
<span class="sd">        constituent table appears in the PartitionedTable. Basically, merge stacks constituent tables on top of each</span>
<span class="sd">        other in the same relative order as the partitioned table.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a Table</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">merge</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to merge all the constituent tables.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="PartitionedTable.filter">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.filter">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The filter method creates a new partitioned table containing only the rows meeting the filter criteria.</span>
<span class="sd">        Filters can not use the constituent column.</span>

<span class="sd">        Args:</span>
<span class="sd">            filters (Union[str, Filter, Sequence[str], Sequence[Filter]]): the filter condition  expression(s) or</span>
<span class="sd">                Filter object(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">             a PartitionedTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">Filter</span><span class="o">.</span><span class="n">from_</span><span class="p">(</span><span class="n">filters</span><span class="p">))</span>  <span class="c1"># type: ignore[arg-type]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                <span class="n">j_partitioned_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                    <span class="n">j_array_list</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to apply filters to the partitioned table.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTable.sort">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.sort">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SortDirection</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SortDirection</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The sort method creates a new partitioned table where the rows are ordered based on values in a specified</span>
<span class="sd">        set of columns. Sort can not use the constituent column.</span>

<span class="sd">        Args:</span>
<span class="sd">            order_by (Union[str, Sequence[str]]): the column(s) to be sorted on.  Can&#39;t include the constituent column.</span>
<span class="sd">            order (Optional[Union[SortDirection, Sequence[SortDirection]]): the corresponding sort directions for</span>
<span class="sd">                each sort column, default is None, meaning ascending order for all the sort columns.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">order_by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="p">:</span>
                <span class="n">order</span> <span class="o">=</span> <span class="p">(</span><span class="n">SortDirection</span><span class="o">.</span><span class="n">ASCENDING</span><span class="p">,)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="n">order</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The number of sort columns must be the same as the number of sort directions.&quot;</span>
                <span class="p">)</span>

            <span class="n">sort_columns</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_sort_column</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">dir_</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">dir_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">order_by</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">j_sc_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span><span class="n">sort_columns</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span>
                <span class="n">j_partitioned_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">j_sc_list</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to sort the partitioned table.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTable.get_constituent">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.get_constituent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_constituent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key_values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Table</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets a single constituent table by its corresponding key column value(s).</span>
<span class="sd">        If there are no matching rows, the result is None. If there are multiple matching rows, a DHError is thrown.</span>

<span class="sd">        Args:</span>
<span class="sd">            key_values (Union[Any, Sequence[Any]]): the value(s) of the key column(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a Table or None</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">key_values</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">key_values</span><span class="p">)</span>
            <span class="n">j_table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">constituentFor</span><span class="p">(</span><span class="n">key_values</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">j_table</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="n">j_table</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;unable to get constituent table.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">constituent_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Table</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all the current constituent tables.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">Table</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">constituents</span><span class="p">()))</span>

<div class="viewcode-block" id="PartitionedTable.transform">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.transform">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Table</span><span class="p">],</span> <span class="n">Table</span><span class="p">],</span>
        <span class="n">dependencies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTable</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the provided function to all constituent Tables and produce a new PartitionedTable with the results</span>
<span class="sd">        as its constituents, with the same data for all other columns in the underlying partitioned Table. Note that</span>
<span class="sd">        if the Table underlying this PartitionedTable changes, a corresponding change will propagate to the result.</span>

<span class="sd">        Args:</span>
<span class="sd">            func (Callable[[Table], Table]): a function which takes a Table as input and returns a new Table</span>
<span class="sd">            dependencies (Optional[Sequence[Union[Table, PartitionedTable]]]): additional dependencies that must be</span>
<span class="sd">                satisfied before applying the provided transform function to added or modified constituents during</span>
<span class="sd">                update processing. If the transform function uses any other refreshing Table or refreshing Partitioned</span>
<span class="sd">                Table, they must be included in this argument. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a PartitionedTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">j_operator</span> <span class="o">=</span> <span class="n">j_unary_operator</span><span class="p">(</span>
                <span class="n">func</span><span class="p">,</span>
                <span class="n">dtypes</span><span class="o">.</span><span class="n">from_jtype</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">j_object_type</span><span class="o">.</span><span class="n">jclass</span><span class="p">),</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="p">)</span>
            <span class="n">dependencies</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">dependencies</span><span class="p">,</span> <span class="n">wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">j_dependencies</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">d</span><span class="o">.</span><span class="n">j_table</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dependencies</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">Table</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">is_refreshing</span>
            <span class="p">]</span>
            <span class="n">j_dependencies</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">d</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span>
                    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dependencies</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">PartitionedTable</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">is_refreshing</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">dependencies</span><span class="p">):</span>
                <span class="n">j_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">j_operator</span><span class="p">,</span> <span class="n">j_dependencies</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span><span class="n">j_partitioned_table</span><span class="o">=</span><span class="n">j_pt</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to transform the PartitionedTable.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTable.partitioned_transform">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.partitioned_transform">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">partitioned_transform</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">other</span><span class="p">:</span> <span class="n">PartitionedTable</span><span class="p">,</span>
        <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Table</span><span class="p">,</span> <span class="n">Table</span><span class="p">],</span> <span class="n">Table</span><span class="p">],</span>
        <span class="n">dependencies</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTable</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTable</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Join the underlying partitioned Tables from this PartitionedTable and other on the key columns, then apply</span>
<span class="sd">        the provided function to all pairs of constituent Tables with the same keys in order to produce a new</span>
<span class="sd">        PartitionedTable with the results as its constituents, with the same data for all other columns in the</span>
<span class="sd">        underlying partitioned Table from this.</span>

<span class="sd">        Note that if the Tables underlying this PartitionedTable or other change, a corresponding change will propagate</span>
<span class="sd">        to the result.</span>

<span class="sd">        Args:</span>
<span class="sd">            other (PartitionedTable): the other Partitioned table whose constituent tables will be passed in as the 2nd</span>
<span class="sd">                argument to the provided function</span>
<span class="sd">            func (Callable[[Table, Table], Table]): a function which takes two Tables as input and returns a new Table</span>
<span class="sd">            dependencies (Optional[Sequence[Union[Table, PartitionedTable]]]): additional dependencies that must be</span>
<span class="sd">                satisfied before applying the provided transform function to added, modified, or newly-matched</span>
<span class="sd">                constituents during update processing. If the transform function uses any other refreshing Table or</span>
<span class="sd">                refreshing Partitioned Table, they must be included in this argument. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a PartitionedTable</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">j_operator</span> <span class="o">=</span> <span class="n">j_binary_operator</span><span class="p">(</span>
                <span class="n">func</span><span class="p">,</span>
                <span class="n">dtypes</span><span class="o">.</span><span class="n">from_jtype</span><span class="p">(</span><span class="n">Table</span><span class="o">.</span><span class="n">j_object_type</span><span class="o">.</span><span class="n">jclass</span><span class="p">),</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="p">)</span>
            <span class="n">dependencies</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">dependencies</span><span class="p">,</span> <span class="n">wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">j_dependencies</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">d</span><span class="o">.</span><span class="n">j_table</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dependencies</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">Table</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">is_refreshing</span>
            <span class="p">]</span>
            <span class="n">j_dependencies</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">d</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span>
                    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dependencies</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">PartitionedTable</span><span class="p">)</span> <span class="ow">and</span> <span class="n">d</span><span class="o">.</span><span class="n">is_refreshing</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="o">*</span><span class="n">dependencies</span><span class="p">):</span>
                <span class="n">j_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">partitionedTransform</span><span class="p">(</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="p">,</span> <span class="n">j_operator</span><span class="p">,</span> <span class="n">j_dependencies</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">PartitionedTable</span><span class="p">(</span><span class="n">j_partitioned_table</span><span class="o">=</span><span class="n">j_pt</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span>
                <span class="s2">&quot;failed to transform the PartitionedTable with another PartitionedTable.&quot;</span><span class="p">,</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTable.proxy">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTable.proxy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">proxy</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">require_matching_keys</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sanity_check_joins</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Makes a proxy that allows table operations to be applied to the constituent tables of this</span>
<span class="sd">        PartitionedTable.</span>

<span class="sd">        Args:</span>
<span class="sd">            require_matching_keys (bool): whether to ensure that both partitioned tables have all the same keys</span>
<span class="sd">                present when an operation uses this PartitionedTable and another PartitionedTable as inputs for a</span>
<span class="sd">                :meth:`~PartitionedTable.partitioned_transform`, default is True</span>
<span class="sd">            sanity_check_joins (bool): whether to check that for proxied join operations, a given join key only occurs</span>
<span class="sd">                in exactly one constituent table of the underlying partitioned table. If the other table argument is</span>
<span class="sd">                also a</span>
<span class="sd">                PartitionedTableProxy, its constituents will also be subjected to this constraint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
            <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_partitioned_table</span><span class="o">.</span><span class="n">proxy</span><span class="p">(</span>
                <span class="n">require_matching_keys</span><span class="p">,</span> <span class="n">sanity_check_joins</span>
            <span class="p">)</span>
        <span class="p">)</span></div>
</div>



<div class="viewcode-block" id="PartitionedTableProxy">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PartitionedTableProxy</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A PartitionedTableProxy is a table operation proxy for the underlying partitioned table. It provides methods</span>
<span class="sd">    that apply table operations to the constituent tables of the underlying partitioned table, produce a new</span>
<span class="sd">    partitioned table from the resulting constituent tables, and return a proxy of it.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        target (PartitionedTable): the underlying partitioned table of the proxy</span>
<span class="sd">        require_matching_keys (bool): whether to ensure that both partitioned tables have all the same keys</span>
<span class="sd">            present when an operation uses this PartitionedTable and another PartitionedTable as inputs for a</span>
<span class="sd">            :meth:`~PartitionedTable.partitioned_transform`, default is True</span>
<span class="sd">        sanity_check_joins (bool): whether to check that for proxied join operations, a given join key only occurs</span>
<span class="sd">            in exactly one constituent table of the underlying partitioned table. If the other table argument is also a</span>
<span class="sd">            PartitionedTableProxy, its constituents will also be subjected to this constraint.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JPartitionedTableProxy</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_refreshing</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Whether this proxy represents a refreshing partitioned table.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">is_refreshing</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateGraph</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The underlying partitioned table proxy&#39;s update graph.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">update_graph</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">j_pt_proxy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="p">,</span> <span class="n">_JPartitionedTableProxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">require_matching_keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">requiresMatchingKeys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sanity_check_joins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">sanityChecksJoins</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="n">PartitionedTable</span><span class="p">(</span><span class="n">j_partitioned_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">target</span><span class="p">())</span>

<div class="viewcode-block" id="PartitionedTableProxy.head">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.head">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.head` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the head of the constituent tables</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">num_rows</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;head operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.tail">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.tail">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">tail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_rows</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.tail` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            num_rows (int): the number of rows at the end of the constituent tables</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="n">num_rows</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;tail operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.reverse">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.reverse">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.reverse` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">reverse</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;reverse operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.snapshot">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.snapshot">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">snapshot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.snapshot` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">snapshot</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;snapshot operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.snapshot_when">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.snapshot_when">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">snapshot_when</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">trigger_table</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTableProxy</span><span class="p">],</span>
        <span class="n">stamp_cols</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">initial</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">incremental</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.snapshot_when` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table with the provided trigger table or PartitionedTableProxy, and produces a new</span>
<span class="sd">        PartitionedTableProxy with the result tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        In the case of the trigger table being another PartitionedTableProxy, the :meth:`~Table.snapshot_when` table</span>
<span class="sd">        operation is applied to the matching pairs of the constituent tables from both underlying partitioned tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            trigger_table (Union[Table, PartitionedTableProxy]): the trigger Table or PartitionedTableProxy</span>
<span class="sd">            stamp_cols (Optional[Union[str, Sequence[str]]]): The columns from trigger_table that form the &quot;stamp</span>
<span class="sd">            key&quot;, may be</span>
<span class="sd">                renames. None, or empty, means that all columns from trigger_table form the &quot;stamp key&quot;.</span>
<span class="sd">            initial (bool): Whether to take an initial snapshot upon construction, default is False. When False, the</span>
<span class="sd">                resulting table will remain empty until trigger_table first updates.</span>
<span class="sd">            incremental (bool): Whether the resulting table should be incremental, default is False. When False, all</span>
<span class="sd">                rows of this table will have the latest &quot;stamp key&quot;. When True, only the rows of this table that have</span>
<span class="sd">                been added or updated will have the latest &quot;stamp key&quot;.</span>
<span class="sd">            history (bool): Whether the resulting table should keep history, default is False. A history table appends a</span>
<span class="sd">                full snapshot of this table and the &quot;stamp key&quot; as opposed to updating existing rows. The history flag</span>
<span class="sd">                is currently incompatible with initial and incremental: when history is True, incremental and initial</span>
<span class="sd">                must be False.</span>
<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">_JSnapshotWhenOptions</span><span class="o">.</span><span class="n">of</span><span class="p">(</span>
                <span class="n">initial</span><span class="p">,</span> <span class="n">incremental</span><span class="p">,</span> <span class="n">history</span><span class="p">,</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">stamp_cols</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigger_table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">snapshotWhen</span><span class="p">(</span>
                        <span class="n">trigger_table</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">options</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;snapshot_when operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.sort">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.sort">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">SortDirection</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SortDirection</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.sort` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            order_by (Union[str, Sequence[str]]): the column(s) to be sorted on</span>
<span class="sd">            order (Optional[Union[SortDirection, Sequence[SortDirection]]): the corresponding sort directions for</span>
<span class="sd">                each sort column, default is None, meaning ascending order for all the sort columns.</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">order</span><span class="p">:</span>
                <span class="n">order</span> <span class="o">=</span> <span class="p">(</span><span class="n">SortDirection</span><span class="o">.</span><span class="n">ASCENDING</span><span class="p">,)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">order</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">o</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">SortDirection</span><span class="o">.</span><span class="n">ASCENDING</span><span class="p">,</span> <span class="n">SortDirection</span><span class="o">.</span><span class="n">DESCENDING</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">order</span>
                    <span class="p">]</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The sort direction must be either &#39;ASCENDING&#39; or &#39;DESCENDING&#39;.&quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;The number of sort columns must be the same as the number of sort directions.&quot;</span>
                    <span class="p">)</span>

            <span class="n">sort_columns</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_sort_column</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">dir_</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">dir_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">order_by</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">j_sc_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span><span class="n">sort_columns</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">j_sc_list</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;sort operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.sort_descending">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.sort_descending">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort_descending</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">order_by</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.sort_descending` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            order_by (Union[str, Sequence[str]]): the column(s) to be sorted on</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">order_by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">order_by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">sortDescending</span><span class="p">(</span><span class="o">*</span><span class="n">order_by</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;sort_descending operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.where">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.where">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Filter</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Filter</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.where` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            filters (Optional[Union[str, Filter, Sequence[str], Sequence[Filter]]]): the filter condition</span>
<span class="sd">                expression(s) or Filter object(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">and_</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span><span class="o">.</span><span class="n">j_filter</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;where operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.where_in">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.where_in">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where_in</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.where_in` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table with the provided filter table, and produces a new PartitionedTableProxy with the result</span>
<span class="sd">        tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            filter_table (Table): the table containing the set of values to filter on</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">whereIn</span><span class="p">(</span><span class="n">filter_table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="o">*</span><span class="n">cols</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;where_in operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.where_not_in">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.where_not_in">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">where_not_in</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span> <span class="n">cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.where_not_in` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table with the provided filter table, and produces a new PartitionedTableProxy with the result</span>
<span class="sd">        tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            filter_table (Table): the table containing the set of values to filter on</span>
<span class="sd">            cols (Union[str, Sequence[str]]): the column name(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">whereNotIn</span><span class="p">(</span><span class="n">filter_table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="o">*</span><span class="n">cols</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;where_not_in operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.view">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.view">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.view` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): the column formula(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;view operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.update_view">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.update_view">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.update_view` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str]]): the column formula(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">updateView</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;update_view operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.update">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Selectable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Selectable</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.update` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Union[str, Sequence[str], Selectable, Sequence[Selectable]]): the column formula(s) or</span>
<span class="sd">            Selectable(s)</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">formulas</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Selectable</span><span class="o">.</span><span class="n">j_object_type</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">j_array_list</span><span class="p">(</span><span class="n">formulas</span><span class="p">))</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;update operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.select">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.select">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">formulas</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Selectable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Selectable</span><span class="p">]]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.select` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Optional[Union[str, Sequence[str], Selectable, Sequence[Selectable]]]): the column formula(s) or</span>
<span class="sd">                Selectable(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">formulas</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Selectable</span><span class="o">.</span><span class="n">j_object_type</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">j_array_list</span><span class="p">(</span><span class="n">formulas</span><span class="p">))</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;select operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.select_distinct">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.select_distinct">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">select_distinct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">formulas</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.select_distinct` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            formulas (Optional[Union[str, Sequence[str]]]): the column formula(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">formulas</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">formulas</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">query_scope_ctx</span><span class="p">(),</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">selectDistinct</span><span class="p">(</span><span class="o">*</span><span class="n">formulas</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;select_distinct operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.natural_join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.natural_join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">natural_join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTableProxy</span><span class="p">],</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.natural_join` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table with the provided right table or PartitionedTableProxy, and produces a new</span>
<span class="sd">        PartitionedTableProxy with the result tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        In the case of the right table being another PartitionedTableProxy, the :meth:`~Table.natural_join` table</span>
<span class="sd">        operation is applied to the matching pairs of the constituent tables from both underlying partitioned tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Union[Table, PartitionedTableProxy]): the right table or PartitionedTableProxy of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or an equal expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">joins</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">naturalJoin</span><span class="p">(</span>
                            <span class="n">table_op</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">naturalJoin</span><span class="p">(</span><span class="n">table_op</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;natural_join operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.exact_join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.exact_join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">exact_join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTableProxy</span><span class="p">],</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.exact_join` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table with the provided right table or PartitionedTableProxy,and produces a new</span>
<span class="sd">        PartitionedTableProxy with the result tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        In the case of the right table being another PartitionedTableProxy, the :meth:`~Table.exact_join` table</span>
<span class="sd">        operation is applied to the matching pairs of the constituent tables from both underlying partitioned tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Union[Table, PartitionedTableProxy]): the right table or PartitionedTableProxy of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or an equal expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">joins</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">exactJoin</span><span class="p">(</span>
                            <span class="n">table_op</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">exactJoin</span><span class="p">(</span><span class="n">table_op</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;exact_join operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.join">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTableProxy</span><span class="p">],</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.join` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table with the provided right table or PartitionedTableProxy, and produces a new PartitionedTableProxy with</span>
<span class="sd">        the result tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        In the case of the right table being another PartitionedTableProxy, the :meth:`~Table.join` table operation</span>
<span class="sd">        is applied to the matching pairs of the constituent tables from both underlying partitioned tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Union[Table, PartitionedTableProxy]): the right table or PartitionedTableProxy of the join</span>
<span class="sd">            on (Optional[Union[str, Sequence[str]]]): the column(s) to match, can be a common name or an equal</span>
<span class="sd">            expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names; default is None</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">joins</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                            <span class="n">table_op</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">table_op</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;join operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.aj">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.aj">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">aj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTableProxy</span><span class="p">],</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.aj` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table with the provided right table or PartitionedTableProxy, and produces a new PartitionedTableProxy with</span>
<span class="sd">        the result tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        In the case of the right table being another PartitionedTableProxy, the :meth:`~Table.aj` table operation</span>
<span class="sd">        is applied to the matching pairs of the constituent tables from both underlying partitioned tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Union[Table, PartitionedTableProxy]): the right table or PartitionedTableProxy of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or a match condition of two</span>
<span class="sd">                columns, e.g. &#39;col_a = col_b&#39;. The first &#39;N-1&#39; matches are exact matches.  The final match is an inexact</span>
<span class="sd">                match.  The inexact match can use either &#39;&gt;&#39; or &#39;&gt;=&#39;.  If a common name is used for the inexact match,</span>
<span class="sd">                &#39;&gt;=&#39; is used for the comparison.</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>
<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">))</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="n">r_table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>

            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="n">table_op</span><span class="o">.</span><span class="n">aj</span><span class="p">(</span><span class="n">r_table_op</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">joins</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;as-of join operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.raj">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.raj">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">raj</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">PartitionedTableProxy</span><span class="p">],</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.raj` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table with the provided right table or PartitionedTableProxy, and produces a new PartitionedTableProxy with</span>
<span class="sd">        the result tables as the constituents of its underlying partitioned table.</span>

<span class="sd">        In the case of the right table being another PartitionedTableProxy, the :meth:`~Table.raj` table operation</span>
<span class="sd">        is applied to the matching pairs of the constituent tables from both underlying partitioned tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Union[Table, PartitionedTableProxy]): the right table or PartitionedTableProxy of the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or a match condition of two</span>
<span class="sd">                columns, e.g. &#39;col_a = col_b&#39;. The first &#39;N-1&#39; matches are exact matches.  The final match is an inexact</span>
<span class="sd">                match.  The inexact match can use either &#39;&lt;&#39; or &#39;&lt;=&#39;.  If a common name is used for the inexact match,</span>
<span class="sd">                &#39;&lt;=&#39; is used for the comparison.</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the right table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>
<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">on</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">))</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">))</span>
            <span class="n">table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>
            <span class="n">r_table_op</span> <span class="o">=</span> <span class="n">jpy</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_object</span><span class="p">,</span> <span class="n">_JTableOperations</span><span class="p">)</span>

            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="n">table_op</span><span class="o">.</span><span class="n">raj</span><span class="p">(</span><span class="n">r_table_op</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">joins</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;reverse as-of join operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.group_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.group_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">group_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.group_by` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">groupBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">groupBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;group-by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.agg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.agg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">agg_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aggs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">]],</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.agg_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            aggs (Union[Aggregation, Sequence[Aggregation]]): the aggregation(s)</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">aggs</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="n">j_agg_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">j_aggregation</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>

            <span class="n">cm</span> <span class="o">=</span> <span class="n">_query_scope_agg_ctx</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">cm</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">aggBy</span><span class="p">(</span><span class="n">j_agg_list</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;agg_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.agg_all_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.agg_all_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">agg_all_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">agg</span><span class="p">:</span> <span class="n">Aggregation</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.agg_all_by` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Note, because agg_all_by applies the aggregation to all the columns of the table, it will ignore</span>
<span class="sd">        any column names specified for the aggregation.</span>

<span class="sd">        Args:</span>
<span class="sd">            agg (Aggregation): the aggregation</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>

            <span class="n">cm</span><span class="p">:</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">AbstractContextManager</span> <span class="o">=</span> <span class="n">_query_scope_agg_ctx</span><span class="p">([</span><span class="n">agg</span><span class="p">])</span>
            <span class="k">with</span> <span class="n">cm</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">aggAllBy</span><span class="p">(</span><span class="n">agg</span><span class="o">.</span><span class="n">j_agg_spec</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;agg_all_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.count_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.count_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">count_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.count_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table with the provided source table, and produces a new PartitionedTableProxy with the result tables as the</span>
<span class="sd">        constituents of its underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            col (str): the name of the column to store the counts</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">countBy</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">countBy</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;count_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.first_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.first_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">first_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.first_by` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">firstBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">firstBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;first_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.last_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.last_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">last_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.last_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">lastBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">lastBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;last_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.min_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.min_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">min_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.min_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">minBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">minBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;min_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.max_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.max_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">max_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.max_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">maxBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">maxBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;max_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.sum_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.sum_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sum_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.sum_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">sumBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">sumBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;sum_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.abs_sum_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.abs_sum_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">abs_sum_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.abs_sum_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">absSumBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">absSumBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;sum_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.weighted_sum_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.weighted_sum_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_sum_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wcol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.weighted_sum_by` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            wcol (str): the name of the weight column</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">wsumBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">wsumBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">)</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;sum_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.avg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.avg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">avg_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.avg_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">avgBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">avgBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;avg_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.weighted_avg_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.weighted_avg_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">weighted_avg_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wcol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.weighted_avg_by` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            wcol (str): the name of the weight column</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">wavgBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">,</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">avgBy</span><span class="p">(</span><span class="n">wcol</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;avg_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.median_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.median_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">median_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.median_by` table operation to all constituent tables of the underlying</span>
<span class="sd">        partitioned table, and produces a new PartitionedTableProxy with the result tables as the constituents of its</span>
<span class="sd">        underlying partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                        <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">medianBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">medianBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;median_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.std_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.std_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">std_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.std_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">stdBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">stdBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;std_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.var_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.var_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">var_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.var_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the group-by column name(s), default is None</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">by</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">varBy</span><span class="p">(</span><span class="o">*</span><span class="n">by</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span><span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">varBy</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;var_by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>


<div class="viewcode-block" id="PartitionedTableProxy.update_by">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.PartitionedTableProxy.update_by">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_by</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ops</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">UpdateByOperation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">UpdateByOperation</span><span class="p">]],</span>
        <span class="n">by</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PartitionedTableProxy</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Applies the :meth:`~Table.update_by` table operation to all constituent tables of the underlying partitioned</span>
<span class="sd">        table, and produces a new PartitionedTableProxy with the result tables as the constituents of its underlying</span>
<span class="sd">        partitioned table.</span>

<span class="sd">        Args:</span>
<span class="sd">            ops (Union[UpdateByOperation, Sequence[UpdateByOperation]]): the update-by operation definition(s)</span>
<span class="sd">            by (Optional[Union[str, Sequence[str]]]): the key column name(s) to group the rows of the table</span>

<span class="sd">        Returns:</span>
<span class="sd">            a new PartitionedTableProxy</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ops</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span>
            <span class="n">by</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">by</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">PartitionedTableProxy</span><span class="p">(</span>
                    <span class="n">j_pt_proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_pt_proxy</span><span class="o">.</span><span class="n">updateBy</span><span class="p">(</span><span class="n">j_array_list</span><span class="p">(</span><span class="n">ops</span><span class="p">),</span> <span class="o">*</span><span class="n">by</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                <span class="n">e</span><span class="p">,</span> <span class="s2">&quot;update-by operation on the PartitionedTableProxy failed.&quot;</span>
            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>
</div>



<div class="viewcode-block" id="MultiJoinInput">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.MultiJoinInput">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MultiJoinInput</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A MultiJoinInput represents the input tables, key columns and additional columns to be used in the multi-table</span>
<span class="sd">    natural join.&quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JMultiJoinInput</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_multijoininput</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">joins</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new MultiJoinInput containing the table to include for the join, the key columns from the table to</span>
<span class="sd">        match with other table keys plus additional columns containing data from the table. Rows containing unique keys</span>
<span class="sd">        will be added to the output table, otherwise the data from these columns will be added to the existing output</span>
<span class="sd">        rows.</span>

<span class="sd">        Args:</span>
<span class="sd">            table (Table): the right table to include in the join</span>
<span class="sd">            on (Union[str, Sequence[str]]): the column(s) to match, can be a common name or an equal expression,</span>
<span class="sd">                i.e. &quot;col_a = col_b&quot; for different column names</span>
<span class="sd">            joins (Optional[Union[str, Sequence[str]]]): the column(s) to be added from the table to the result</span>
<span class="sd">                table, can be renaming expressions, i.e. &quot;new_col = col&quot;; default is None</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">table</span>
            <span class="n">on</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="n">joins</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">joins</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j_multijoininput</span> <span class="o">=</span> <span class="n">_JMultiJoinInput</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">on</span><span class="p">,</span> <span class="n">joins</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to build a MultiJoinInput object.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>



<div class="viewcode-block" id="MultiJoinTable">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.MultiJoinTable">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MultiJoinTable</span><span class="p">(</span><span class="n">JObjectWrapper</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A MultiJoinTable is an object that contains the result of a multi-table natural join. To retrieve the underlying</span>
<span class="sd">    result Table, use the :attr:`.table` property.&quot;&quot;&quot;</span>

    <span class="n">j_object_type</span> <span class="o">=</span> <span class="n">_JMultiJoinTable</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">j_object</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">jpy</span><span class="o">.</span><span class="n">JType</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">j_multijointable</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the Table containing the multi-table natural join output.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Table</span><span class="p">(</span><span class="n">j_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j_multijointable</span><span class="o">.</span><span class="n">table</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">input</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Table</span><span class="p">],</span> <span class="n">MultiJoinInput</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">MultiJoinInput</span><span class="p">]],</span>
        <span class="n">on</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new MultiJoinTable. The join can be specified in terms of either tables or MultiJoinInputs.</span>

<span class="sd">        Args:</span>
<span class="sd">            input (Union[Table, Sequence[Table], MultiJoinInput, Sequence[MultiJoinInput]]): the input objects</span>
<span class="sd">                specifying the tables and columns to include in the join.</span>
<span class="sd">            on (Optional[Union[str, Sequence[str]]]): the column(s) to match, can be a common name or an equality</span>
<span class="sd">                expression that matches every input table, i.e. &quot;col_a = col_b&quot; to rename output column names. Note:</span>
<span class="sd">                When MultiJoinInput objects are supplied, this parameter must be omitted.</span>

<span class="sd">        Raises:</span>
<span class="sd">            DHError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">Table</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">Table</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">tables</span><span class="p">:</span> <span class="n">Sequence</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="o">*</span><span class="n">tables</span><span class="p">):</span>
                    <span class="n">j_tables</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">j_multijointable</span> <span class="o">=</span> <span class="n">_JMultiJoinFactory</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">on</span><span class="p">,</span> <span class="o">*</span><span class="n">j_tables</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">MultiJoinInput</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span>
                <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ji</span><span class="p">,</span> <span class="n">MultiJoinInput</span><span class="p">)</span> <span class="k">for</span> <span class="n">ji</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">if</span> <span class="n">on</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;on parameter is not permitted when MultiJoinInput objects are provided.&quot;</span>
                    <span class="p">)</span>
                <span class="n">wrapped_input</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">wrapped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">ji</span><span class="o">.</span><span class="n">table</span> <span class="k">for</span> <span class="n">ji</span> <span class="ow">in</span> <span class="n">wrapped_input</span><span class="p">]</span>
                <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="o">*</span><span class="n">tables</span><span class="p">):</span>
                    <span class="nb">input</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">j_multijointable</span> <span class="o">=</span> <span class="n">_JMultiJoinFactory</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="o">*</span><span class="nb">input</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span>
                    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;input must be a Table, a sequence of Tables, a MultiJoinInput, or a sequence of &quot;</span>
                    <span class="s2">&quot;MultiJoinInputs.&quot;</span>
                <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;failed to build a MultiJoinTable object.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>



<div class="viewcode-block" id="multi_join">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.multi_join">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">multi_join</span><span class="p">(</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Table</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Table</span><span class="p">],</span> <span class="n">MultiJoinInput</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">MultiJoinInput</span><span class="p">]],</span>
    <span class="n">on</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MultiJoinTable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The multi_join method creates a new table by performing a multi-table natural join on the input tables.  The</span>
<span class="sd">    result</span>
<span class="sd">    consists of the set of distinct keys from the input tables natural joined to each input table. Input tables need not</span>
<span class="sd">    have a matching row for each key, but they may not have multiple matching rows for a given key.</span>

<span class="sd">    Args:</span>
<span class="sd">        input (Union[Table, Sequence[Table], MultiJoinInput, Sequence[MultiJoinInput]]): the input objects specifying</span>
<span class="sd">        the</span>
<span class="sd">            tables and columns to include in the join.</span>
<span class="sd">        on (Optional[Union[str, Sequence[str]]]): the column(s) to match, can be a common name or an equality expression</span>
<span class="sd">            that matches every input table, i.e. &quot;col_a = col_b&quot; to rename output column names. Note: When</span>
<span class="sd">            MultiJoinInput objects are supplied, this parameter must be omitted.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MultiJoinTable: the result of the multi-table natural join operation. To access the underlying Table, use the</span>
<span class="sd">            :attr:`~MultiJoinTable.table` property.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">MultiJoinTable</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">on</span><span class="p">)</span></div>



<span class="c1"># region utility functions</span>


<div class="viewcode-block" id="table_diff">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.table_diff">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">table_diff</span><span class="p">(</span>
    <span class="n">t1</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">t2</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">max_diffs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">floating_comparison</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="s2">&quot;relative&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;exact&quot;</span><span class="p">,</span>
    <span class="n">ignore_column_order</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the differences between this table and the provided table as a string. If the two tables are the same,</span>
<span class="sd">    an empty string is returned. The differences are returned in a human-readable format.</span>

<span class="sd">    This method starts by comparing the table sizes, and then the schema of the two tables, such as the number of</span>
<span class="sd">    columns, column names, column types, column orders. If the schemas are different, the comparison stops and</span>
<span class="sd">    the differences are returned. If the schemas are the same, the method proceeds to compare the data in the</span>
<span class="sd">    tables. The method compares the data in the tables column by column (not row by row) and only records the first</span>
<span class="sd">    difference found in each column.</span>

<span class="sd">    Note, inexact comparison of floating numbers may sometimes be desirable due to their inherent imprecision.</span>
<span class="sd">    When that is the case, the floating_comparison should be set to either &#39;absolute&#39; or &#39;relative&#39;. When it is set</span>
<span class="sd">    to &#39;absolute&#39;, the absolute value of the difference between two floating numbers is used to compare against a</span>
<span class="sd">    threshold. The threshold is set to 0.0001 for Doubles and 0.005 for Floats. Only differences that are greater</span>
<span class="sd">    than the threshold are recorded. When floating_comparison is set to &#39;relative&#39;, the relative difference between</span>
<span class="sd">    two floating numbers is used to compare against the threshold. The relative difference is calculated as the absolute</span>
<span class="sd">    difference divided by the smaller absolute value between the two numbers.</span>

<span class="sd">    Args:</span>
<span class="sd">        t1 (Table): the table to compare</span>
<span class="sd">        t2 (Table): the table to compare against</span>
<span class="sd">        max_diffs (int): the maximum number of differences to return, default is 1</span>
<span class="sd">        floating_comparison (Literal[&#39;exact&#39;, &#39;absolute&#39;, &#39;relative&#39;]): the type of comparison to use for floating</span>
<span class="sd">        numbers,</span>
<span class="sd">            default is &#39;exact&#39;</span>
<span class="sd">        ignore_column_order (bool): whether columns that exist in both tables but in different orders are</span>
<span class="sd">            treated as differences.  False indicates that column order matters (default), and True indicates that</span>
<span class="sd">            column order does not matter.</span>

<span class="sd">    Returns:</span>
<span class="sd">        string</span>

<span class="sd">    Raises:</span>
<span class="sd">        DHError</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">diff_items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">max_diffs</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;max_diffs must be greater than 0.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">floating_comparison</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="s2">&quot;relative&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;floating_comparison must be one of &#39;exact&#39;, &#39;absolute&#39;, or &#39;relative&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">floating_comparison</span> <span class="o">!=</span> <span class="s2">&quot;exact&quot;</span><span class="p">:</span>
            <span class="n">diff_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_JDiffItems</span><span class="o">.</span><span class="n">DoublesExact</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">floating_comparison</span> <span class="o">==</span> <span class="s2">&quot;relative&quot;</span><span class="p">:</span>
            <span class="n">diff_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_JDiffItems</span><span class="o">.</span><span class="n">DoubleFraction</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ignore_column_order</span><span class="p">:</span>
            <span class="n">diff_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_JDiffItems</span><span class="o">.</span><span class="n">ColumnsOrder</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">diff_items</span><span class="p">:</span>
                <span class="n">j_diff_items</span> <span class="o">=</span> <span class="n">_JEnumSet</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="o">*</span><span class="n">diff_items</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">_JTableTools</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span>
                    <span class="n">t1</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">max_diffs</span><span class="p">,</span> <span class="n">j_diff_items</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">_JTableTools</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">j_table</span><span class="p">,</span> <span class="n">max_diffs</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;table diff failed&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>



<span class="c1"># endregion</span>


<div class="viewcode-block" id="keyed_transpose">
<a class="viewcode-back" href="../../code/deephaven.table.html#deephaven.keyed_transpose">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">keyed_transpose</span><span class="p">(</span>
    <span class="n">table</span><span class="p">:</span> <span class="n">Table</span><span class="p">,</span>
    <span class="n">aggs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Aggregation</span><span class="p">]],</span>
    <span class="n">row_by_cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">col_by_cols</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">initial_groups</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Table</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">new_column_behavior</span><span class="p">:</span> <span class="n">NewColumnBehaviorType</span> <span class="o">=</span> <span class="n">NewColumnBehaviorType</span><span class="o">.</span><span class="n">FAIL</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The keyed_transpose operation takes a source table with a set of aggregations and produces a new table where</span>
<span class="sd">    the columns specified in ``row_by_cols`` are the keys used for the aggregation, and the values for the columns</span>
<span class="sd">    specified in ``col_by_cols`` are used for the column names. An optional set of ``initial_groups`` can be</span>
<span class="sd">    provided to ensure that the output table contains the full set of aggregated columns, even if no data is present yet</span>
<span class="sd">    in the source table.</span>

<span class="sd">    For example, given the following source table...</span>

<span class="sd">    ============ =========</span>
<span class="sd">    Date         Level</span>
<span class="sd">    ============ =========</span>
<span class="sd">    2025-08-05   INFO</span>
<span class="sd">    2025-08-05   INFO</span>
<span class="sd">    2025-08-06   WARN</span>
<span class="sd">    2025-08-07   ERROR</span>
<span class="sd">    ============ =========</span>

<span class="sd">    ... and the usage ...</span>

<span class="sd">    ``t = keyed_transpose(source, [agg.count_(&#39;Count&#39;)], [&#39;Date&#39;], [&#39;Level&#39;])``</span>

<span class="sd">    The expected output for table &quot;t&quot; is ...</span>

<span class="sd">    ============ ========= ========= =========</span>
<span class="sd">    Date         INFO      WARN      ERROR</span>
<span class="sd">    ============ ========= ========= =========</span>
<span class="sd">    2025-08-05           2    (null)    (null)</span>
<span class="sd">    2025-08-06      (null)         1    (null)</span>
<span class="sd">    2025-08-07      (null)    (null)         1</span>
<span class="sd">    ============ ========= ========= =========</span>

<span class="sd">    In the example, you can see that the column names (e.g. INFO, WARN, ERROR) are taken from the values occurring for</span>
<span class="sd">    ``Level``. But what if there are multiple aggregations or multiple ``col_by_cols`` specified? The</span>
<span class="sd">    resulting column names may yield duplicates.</span>

<span class="sd">    To avoid conflicts, the column naming works according to the following contract:</span>

<span class="sd">    - If ``aggs = 1`` and ``col_by_cols = 1``: Column names are the value of the ``col_by_cols`` column. (ex. INFO,</span>
<span class="sd">    WARN)</span>
<span class="sd">    - If ``aggs &gt; 1``: Column names are prefixed with the aggregation column name. (ex. Count_INFO, MySum_INFO)</span>
<span class="sd">    - If ``col_by_cols &gt; 1``: Values for the original columns are separated by an underscore (ex. INFO_OTHER1,</span>
<span class="sd">    WARN_OTHER2)</span>
<span class="sd">    - If Illegal Characters: Purge characters that are invalid for Deephaven column names. (ex. &quot;1-2.3/4&quot; becomes</span>
<span class="sd">    &quot;1234&quot;)</span>
<span class="sd">    - If Starts with Number: Add the prefix &quot;column_&quot; to the column name. (ex. column_123)</span>
<span class="sd">    - If Duplicate Column Name: Add a suffix to differentiate the columns. (ex. INFO, INFO2)</span>

<span class="sd">    Given the above contract, and to give you more control over the result, it may be necessary to sanitize data values</span>
<span class="sd">    that may be used as column names before using ``keyed_transpose``. Otherwise, &quot;12.34&quot; could be translated to</span>
<span class="sd">    &quot;column_1234&quot; instead of a more meaningful column name.</span>

<span class="sd">    Args:</span>
<span class="sd">        table (Table): The source table to transpose.</span>
<span class="sd">        aggs (Union[Aggregation, Sequence[Aggregation]]): The aggregation(s) to apply to the source table.</span>
<span class="sd">        row_by_cols (Union[str, Sequence[str]]): The column(s) to use as row keys in the transposed table.</span>
<span class="sd">        col_by_cols (Union[str, Sequence[str]]): The columns whose values become the new aggregated columns.</span>
<span class="sd">        initial_groups (Optional[Table]): An optional initial set of groups to ensure all columns are present in the</span>
<span class="sd">            output, defaults to None.</span>
<span class="sd">        new_column_behavior (NewColumnBehaviorType): The behavior when a new column would be added to the</span>
<span class="sd">            table, default is NewColumnBehaviorType.FAIL.</span>

<span class="sd">    Returns:</span>
<span class="sd">        a new table</span>

<span class="sd">    Raises:</span>
<span class="sd">        DHError</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">j_source_table</span> <span class="o">=</span> <span class="n">unwrap</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="n">aggs</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">aggs</span><span class="p">)</span>
        <span class="n">row_by_cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">row_by_cols</span><span class="p">)</span>
        <span class="n">col_by_cols</span> <span class="o">=</span> <span class="n">to_sequence</span><span class="p">(</span><span class="n">col_by_cols</span><span class="p">)</span>
        <span class="n">j_agg_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">([</span><span class="n">agg</span><span class="o">.</span><span class="n">j_aggregation</span> <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">])</span>

        <span class="k">with</span> <span class="n">auto_locking_ctx</span><span class="p">(</span><span class="n">table</span><span class="p">):</span>
            <span class="n">j_row_by_cols_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span>
                <span class="p">[</span><span class="n">_JColumnName</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">row_by_cols</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">j_col_by_cols_list</span> <span class="o">=</span> <span class="n">j_array_list</span><span class="p">(</span>
                <span class="p">[</span><span class="n">_JColumnName</span><span class="o">.</span><span class="n">of</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">col_by_cols</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">j_initial_groups_table</span> <span class="o">=</span> <span class="n">unwrap</span><span class="p">(</span><span class="n">initial_groups</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">Table</span><span class="p">(</span>
                <span class="n">j_table</span><span class="o">=</span><span class="n">_JKeyedTranspose</span><span class="o">.</span><span class="n">keyedTranspose</span><span class="p">(</span>
                    <span class="n">j_source_table</span><span class="p">,</span>
                    <span class="n">j_agg_list</span><span class="p">,</span>
                    <span class="n">j_row_by_cols_list</span><span class="p">,</span>
                    <span class="n">j_col_by_cols_list</span><span class="p">,</span>
                    <span class="n">j_initial_groups_table</span><span class="p">,</span>
                    <span class="n">new_column_behavior</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">DHError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;keyed_transpose operation failed.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span></div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Deephaven Data Labs
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=4e2eecee"></script>
    </body>
</html>